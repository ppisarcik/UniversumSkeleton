!function($){"use strict";$.fn.fileuploader=function(q){return this.each(function(t,r){var s=$(r),p=null,o=null,l=null,sl=[],n=$.extend(!0,{},$.fn.fileuploader.defaults,q),f={init:function(){return s.closest(".fileuploader").length||s.wrap('<div class="fileuploader"></div>'),p=s.closest(".fileuploader"),f.set("attrOpts"),f.isSupported()?(!n.beforeRender||!$.isFunction(n.beforeRender)||!1!==n.beforeRender(p,s))&&(f.redesign(),n.files&&f.files.append(n.files),f.rendered=!0,n.afterRender&&$.isFunction(n.afterRender)&&n.afterRender(l,p,o,s),void(f.disabled||f.bindUnbindEvents(!0))):(n.onSupportError&&$.isFunction(n.onSupportError)&&n.onSupportError(p,s),!1)},bindUnbindEvents:function(e){e&&f.bindUnbindEvents(!1),s[e?"on":"off"](f._assets.getAllEvents(),f.onEvent),n.changeInput&&o!==s&&o[e?"on":"off"]("click",f.clickHandler),n.dragDrop&&n.dragDrop.container.length&&(n.dragDrop.container[e?"on":"off"]("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault()}),n.dragDrop.container[e?"on":"off"]("drop",f.dragDrop.onDrop),n.dragDrop.container[e?"on":"off"]("dragover",f.dragDrop.onDragEnter),n.dragDrop.container[e?"on":"off"]("dragleave",f.dragDrop.onDragLeave)),f.isUploadMode()&&n.clipboardPaste&&$(window)[e?"on":"off"]("paste",f.clipboard.paste),s.closest("form")[e?"on":"off"]("reset",f.reset)},redesign:function(){if(o=s,n.theme&&p.addClass("fileuploader-theme-"+n.theme),n.changeInput){switch((typeof n.changeInput).toLowerCase()){case"boolean":o=$('<div class="fileuploader-input"><div class="fileuploader-input-caption"><span>'+f._assets.textParse(n.captions.feedback)+'</span></div><div class="fileuploader-input-button"><span>'+f._assets.textParse(n.captions.button)+"</span></div></div>");break;case"string":" "!=n.changeInput&&(o=$(f._assets.textParse(n.changeInput,n)));break;case"object":o=$(n.changeInput);break;case"function":o=$(n.changeInput(s,p,n,f._assets.textParse))}s.after(o),s.css({position:"absolute","z-index":"-9999",height:"0",width:"0",padding:"0",margin:"0","line-height":"0",outline:"0",border:"0",opacity:"0"})}n.thumbnails&&f.thumbnails.create(),n.dragDrop&&(n.dragDrop="object"!=typeof n.dragDrop?{container:null}:n.dragDrop,n.dragDrop.container=n.dragDrop.container?$(n.dragDrop.container):o)},clickHandler:function(e){e.preventDefault(),f.clipboard._timer?f.clipboard.clean():s.click()},onEvent:function(e){switch(e.type){case"focus":p&&p.addClass("fileuploader-focused");break;case"blur":p&&p.removeClass("fileuploader-focused");break;case"change":f.onChange.call(this)}n.listeners&&$.isFunction(n.listeners[e.type])&&n.listeners[e.type].call(s,p)},set:function(e,t){switch(e){case"attrOpts":for(var a=["limit","maxSize","fileMaxSize","extensions","changeInput","theme","addMore","listInput","files"],i=0;i<a.length;i++){var r="data-fileuploader-"+a[i];if(f._assets.hasAttr(r))switch(a[i]){case"changeInput":case"addMore":case"listInput":n[a[i]]=["true","false"].indexOf(s.attr(r))>-1?"true"==s.attr(r):s.attr(r);break;case"extensions":n[a[i]]=s.attr(r).replace(/ /g,"").split(",");break;case"files":n[a[i]]=JSON.parse(s.attr(r));break;default:n[a[i]]=s.attr(r)}s.removeAttr(r)}null==s.attr("disabled")&&null==s.attr("readonly")&&0!==n.limit||(f.disabled=!0),(!n.limit||n.limit&&n.limit>=2)&&(s.attr("multiple","multiple"),n.inputNameBrackets&&"[]"!=s.attr("name").slice(-2)&&s.attr("name",s.attr("name")+"[]")),!0===n.listInput&&(n.listInput=$('<input type="hidden" name="fileuploader-list-'+s.attr("name").replace("[]","").split("[").pop().replace("]","")+'">').insertBefore(s)),"string"==typeof n.listInput&&0==$(n.listInput).length&&(n.listInput=$('<input type="hidden" name="'+n.listInput+'">').insertBefore(s)),f.set("disabled",f.disabled),!n.fileMaxSize&&n.maxSize&&(n.fileMaxSize=n.maxSize);break;case"disabled":f.disabled=t,p[f.disabled?"addClass":"removeClass"]("fileuploader-disabled"),s[f.disabled?"attr":"removeAttr"]("disabled","disabled"),f.rendered&&f.bindUnbindEvents(!t);break;case"feedback":t||(t=f._assets.textParse(f._itFl.length>0?n.captions.feedback2:n.captions.feedback,{length:f._itFl.length})),$(!o.is(":file"))&&o.find(".fileuploader-input-caption span").html(t);break;case"input":l=f._assets.copyAllAttributes($('<input type="file">'),s,!0);f.bindUnbindEvents(!1),s.after(s=l).remove(),f.bindUnbindEvents(!0);break;case"prevInput":sl.length>0&&(f.bindUnbindEvents(!1),sl[t].remove(),sl.splice(t,1),s=sl[sl.length-1],f.bindUnbindEvents(!0));break;case"nextInput":var l=f._assets.copyAllAttributes($('<input type="file">'),s);f.bindUnbindEvents(!1),sl.length>0&&0==sl[sl.length-1].get(0).files.length?s=sl[sl.length-1]:(-1==sl.indexOf(s)&&sl.push(s),sl.push(l),s.after(s=l)),f.bindUnbindEvents(!0);break;case"listInput":n.listInput&&n.listInput.val(null===t?f.files.list(!0):t)}},onChange:function(e,t){var a=s.get(0).files;if(t){if(!t.length)return f.set("input",""),f.files.clear(),!1;a=t}if(f.clipboard._timer&&f.clipboard.clean(),!f.isDefaultMode()||(f.reset(),0!=a.length)){if(n.beforeSelect&&$.isFunction(n.beforeSelect)&&0==n.beforeSelect(a,l,p,o,s))return!1;for(var i=0,r=0;r<a.length;r++){var d=a[r],u=f._itFl[f.files.add(d,"choosed")],c=f.files.check(u,a,0==r);if(!0===c)n.thumbnails&&f.thumbnails.item(u),f.isUploadMode()&&f.upload.prepare(u),n.onSelect&&$.isFunction(n.onSelect)&&n.onSelect(u,l,p,o,s),i++;else if(f.files.remove(u,!0),c[2]||(f.isDefaultMode()&&(f.set("input",""),f.reset(),c[3]=!0),c[1]&&n.dialogs.alert(c[1])),c[3])break}f.isUploadMode()&&i>0&&f.set("input",""),f.set("feedback",null),f.isAddMoreMode()&&i>0&&f.set("nextInput"),f.set("listInput",null),n.afterSelect&&$.isFunction(n.afterSelect)&&n.afterSelect(l,p,o,s)}},thumbnails:{create:function(){null!=n.thumbnails.beforeShow&&$.isFunction(n.thumbnails.beforeShow)&&n.thumbnails.beforeShow(p,o,s);var e=$(f._assets.textParse(n.thumbnails.box)).appendTo(n.thumbnails.boxAppendTo?n.thumbnails.boxAppendTo:p);l=e.is(n.thumbnails._selectors.list)?e:e.find(n.thumbnails._selectors.list),f.isUploadMode()&&n.thumbnails._selectors.start&&l.on("click",n.thumbnails._selectors.start,function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),a=f.files.find(t);a&&f.upload.send(a,!0)}),f.isUploadMode()&&n.thumbnails._selectors.retry&&l.on("click",n.thumbnails._selectors.retry,function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),a=f.files.find(t);a&&f.upload.retry(a)}),n.thumbnails._selectors.remove&&l.on("click",n.thumbnails._selectors.remove,function(e){if(e.preventDefault(),f.locked)return!1;var t=$(this).closest(n.thumbnails._selectors.item),a=f.files.find(t),i=function(e){f.files.remove(a)};a&&(a.upload&&"successful"!=a.upload.status?f.upload.cancel(a):n.thumbnails.removeConfirmation?n.dialogs.confirm(f._assets.textParse(n.captions.removeConfirmation,a),i):i())})},clear:function(){l&&l.html("")},item:function(e){e.icon=f.thumbnails.generateFileIcon(e.format,e.extension),e.image='<div class="fileuploader-item-image fileuploader-loading"></div>',e.progressBar=f.isUploadMode()?'<div class="fileuploader-progressbar"><div class="bar"></div></div>':"",e.html=$(f._assets.textParse(e.appended&&n.thumbnails.item2?n.thumbnails.item2:n.thumbnails.item,e,!0)),e.progressBar=e.html.find(".fileuploader-progressbar"),e.html.addClass("file-type-"+(e.format?e.format:"no")+" file-ext-"+(e.extension?e.extension:"no")),e.html[n.thumbnails.itemPrepend?"prependTo":"appendTo"](l),e.renderImage=function(){f.thumbnails.renderImage(e,!0)},f.thumbnails.renderImage(e),null!=n.thumbnails.onItemShow&&$.isFunction(n.thumbnails.onItemShow)&&n.thumbnails.onItemShow(e,l,p,o,s)},generateFileIcon:function(e,t){var n='<div style="${style}" class="fileuploader-item-icon${class}"><i>'+(t||"")+"</i></div>",a=f._assets.textToColor(t);return a&&(f._assets.isBrightColor(a)&&(n=n.replace("${class}"," is-bright-color")),n=n.replace("${style}","background-color: "+a)),n.replace("${style}","").replace("${class}","")},renderImage:function(e,t){var a=e.html.find(".fileuploader-item-image"),i=function(t){var i=$(t);i.is("img")&&i.on("load error",function(t){"error"==t.type&&r(),d(),null!=n.thumbnails.onImageLoaded&&$.isFunction(n.thumbnails.onImageLoaded)&&n.thumbnails.onImageLoaded(e,l,p,o,s)}),i.is("canvas")&&null!=n.thumbnails.onImageLoaded&&$.isFunction(n.thumbnails.onImageLoaded)&&n.thumbnails.onImageLoaded(e,l,p,o,s),a.removeClass("fileupload-no-thumbnail fileuploader-loading").html(i)},r=function(){a.addClass("fileupload-no-thumbnail"),a.removeClass("fileuploader-loading").html(e.icon)},d=function(){var t=0;if(e&&f._pfrL.indexOf(e)>-1)for(f._pfrL.splice(f._pfrL.indexOf(e),1);t<f._pfrL.length;){if(f._itFl.indexOf(f._pfrL[t])>-1){f.thumbnails.renderImage(f._pfrL[t],!0);break}f._pfrL.splice(t,1),t++}};if(a.length){if(e.image=a,"image"==e.format&&f.isFileReaderSupported()&&(e.appended||n.thumbnails.startImageRenderer||t)){if(n.thumbnails.synchronImages&&(-1!=f._pfrL.indexOf(e)||t||f._pfrL.push(e),f._pfrL.length>1&&!t))return;var u=new FileReader,c=function(e){if(n.thumbnails.canvasImage){var t=document.createElement("canvas"),o=t.getContext("2d"),l=new Image;l.onload=function(){var e=n.thumbnails.canvasImage.height?n.thumbnails.canvasImage.height:a.height(),s=n.thumbnails.canvasImage.width?n.thumbnails.canvasImage.width:a.width(),u=l.height/e,c=l.width/s,p=u<c?u:c,g=l.height/p,h=l.width/p,m=Math.ceil(Math.log(l.width/h)/Math.log(2));if(t.height=e,t.width=s,l.width<t.width||l.height<t.height||m<=1){var v=l.width<t.width?t.width/2-l.width/2:l.width>t.width?-(l.width-t.width)/2:0,b=l.height<t.height?t.height/2-l.height/2:0;o.drawImage(l,v,b,l.width,l.height)}else{var y=document.createElement("canvas"),x=y.getContext("2d");y.width=.5*l.width,y.height=.5*l.height,x.fillStyle="#fff",x.fillRect(0,0,y.width,y.height),x.drawImage(l,0,0,y.width,y.height),x.drawImage(y,0,0,.5*y.width,.5*y.height),o.drawImage(y,h>t.width?h-t.width:0,0,.5*y.width,.5*y.height,0,0,h,g)}l=null,f._assets.isBlankCanvas(t)?r():i(t),d()},l.onerror=function(e){r(),d()},l.src=e.target.result}else i('<img src="'+e.target.result+'" draggable="false">')};return void("string"==typeof e.file?c({target:{result:e.file}}):(u.onload=c,u.readAsDataURL(e.file)))}r()}else d()}},upload:{prepare:function(e,t){e.upload={url:n.upload.url,data:n.upload.data||{},formData:new FormData,type:n.upload.type||"POST",enctype:n.upload.enctype||"multipart/form-data",cache:!1,contentType:!1,processData:!1,status:null,send:function(){f.upload.send(e,!0)},cancel:function(){f.upload.cancel(e)},retry:function(){f.upload.retry(e)}},e.upload.formData.append(s.attr("name"),e.file,!!e.name&&e.name),(n.upload.start||t)&&f.upload.send(e,t)},send:function(e,t){if(e.upload){var a=function(t){e.html.removeClass("upload-pending upload-loading upload-cancelled upload-failed upload-success").addClass("upload-"+(t||e.upload.status))},i=function(){var t=0;if(f._pfuL.length>0)for(f._pfuL.indexOf(e)>-1&&f._pfuL.splice(f._pfuL.indexOf(e),1);t<f._pfuL.length;){if(f._itFl.indexOf(f._pfuL[t])>-1&&f._pfuL[t].upload&&!f._pfuL[t].upload.$ajax){f.upload.send(f._pfuL[t],!0);break}f._pfuL.splice(t,1),t++}};if(n.upload.synchron)if(e.upload.status="pending",e.html&&a(),t)f._pfuL.indexOf(e)>-1&&f._pfuL.splice(f._pfuL.indexOf(e),1);else if(-1==f._pfuL.indexOf(e)&&f._pfuL.push(e),f._pfuL.length>1)return;if(n.upload.beforeSend&&$.isFunction(n.upload.beforeSend)&&!1===n.upload.beforeSend(e,l,p,o,s))return a(),void i();if(p.addClass("fileuploader-is-uploading"),e.upload.$ajax&&e.upload.$ajax.abort(),delete e.upload.$ajax,delete e.upload.send,e.upload.status="loading",e.html&&(n.thumbnails._selectors.start&&e.html.find(n.thumbnails._selectors.start).remove(),a()),e.upload.data)for(var r in e.upload.data)e.upload.formData.append(r,e.upload.data[r]);e.upload.data=e.upload.formData,e.upload.xhr=function(){var t=$.ajaxSettings.xhr(),n=new Date;return t.upload&&t.upload.addEventListener("progress",function(t){f.upload.progressHandling(t,e,n)},!1),t},e.upload.complete=function(e,t){i();var a=!0;$.each(f._itFl,function(e,t){t.upload&&t.upload.$ajax&&(a=!1)}),a&&(p.removeClass("fileuploader-is-uploading"),null!=n.upload.onComplete&&"function"==typeof n.upload.onComplete&&n.upload.onComplete(l,p,o,s,e,t))},e.upload.success=function(t,i,r){e.uploaded=!0,delete e.upload,e.upload={status:"successful"},e.html&&a(),f.set("listInput",null),null!=n.upload.onSuccess&&$.isFunction(n.upload.onSuccess)&&n.upload.onSuccess(t,e,l,p,o,s,i,r)},e.upload.error=function(t,i,r){e.uploaded=!1,e.upload.status="cancelled"==e.upload.status?e.upload.status:"failed",delete e.upload.$ajax,e.html&&a(),null!=n.upload.onError&&$.isFunction(n.upload.onError)&&n.upload.onError(e,l,p,o,s,t,i,r)},e.upload.$ajax=$.ajax(e.upload)}},cancel:function(e){e&&e.upload&&(e.upload.status="cancelled",e.upload.$ajax&&e.upload.$ajax.abort(),delete e.upload.$ajax,f.files.remove(e))},retry:function(e){e&&e.upload&&(e.html&&n.thumbnails._selectors.retry&&e.html.find(n.thumbnails._selectors.retry).remove(),f.upload.prepare(e,!0))},progressHandling:function(e,t,a){if(e.lengthComputable){var i=e.loaded,r=e.total,d=Math.round(100*i/r),u=((new Date).getTime()-a.getTime())/1e3,c=u?i/u:0,g=r-i,h=u?g/c:null,m={loaded:i,loadedInFormat:f._assets.bytesToText(i),total:r,totalInFormat:f._assets.bytesToText(r),percentage:d,secondsElapsed:u,secondsElapsedInFormat:f._assets.secondsToText(u,!0),bytesPerSecond:c,bytesPerSecondInFormat:f._assets.bytesToText(c)+"/s",remainingBytes:g,remainingBytesInFormat:f._assets.bytesToText(g),secondsRemaining:h,secondsRemainingInFormat:f._assets.secondsToText(h,!0)};n.upload.onProgress&&$.isFunction(n.upload.onProgress)&&n.upload.onProgress(m,t,l,p,o,s)}}},dragDrop:{onDragEnter:function(e){clearTimeout(f.dragDrop._timer),n.dragDrop.container.addClass("fileuploader-dragging"),f.set("feedback",f._assets.textParse(n.captions.drop)),null!=n.dragDrop.onDragEnter&&$.isFunction(n.dragDrop.onDragEnter)&&n.dragDrop.onDragEnter(e,l,p,o,s)},onDragLeave:function(e){clearTimeout(f.dragDrop._timer),f.dragDrop._timer=setTimeout(function(e){if(!f.dragDrop._dragLeaveCheck(e))return!1;n.dragDrop.container.removeClass("fileuploader-dragging"),f.set("feedback",null),null!=n.dragDrop.onDragLeave&&$.isFunction(n.dragDrop.onDragLeave)&&n.dragDrop.onDragLeave(e,l,p,o,s)},100,e)},onDrop:function(e){clearTimeout(f.dragDrop._timer),n.dragDrop.container.removeClass("fileuploader-dragging"),f.set("feedback",null),e&&e.originalEvent&&e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files&&e.originalEvent.dataTransfer.files.length&&(f.isUploadMode()?f.onChange(e,e.originalEvent.dataTransfer.files):s.prop("files",e.originalEvent.dataTransfer.files)),null!=n.dragDrop.onDrop&&$.isFunction(n.dragDrop.onDrop)&&n.dragDrop.onDrop(e,l,p,o,s)},_dragLeaveCheck:function(e){var t=$(e.currentTarget);return!(!t.is(n.dragDrop.container)&&n.dragDrop.container.find(t).length)}},clipboard:{paste:function(e){if(f._assets.isIntoView(o)&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items&&e.originalEvent.clipboardData.items.length){var t=e.originalEvent.clipboardData.items;f.clipboard.clean();for(var a=0;a<t.length;a++)if(-1!==t[a].type.indexOf("image")||-1!==t[a].type.indexOf("text/uri-list")){var i=t[a].getAsFile(),r=new Date,l=function(e){return e<10&&(e="0"+e),e},s=n.clipboardPaste>1?n.clipboardPaste:2e3;i&&(i._name="Clipboard "+r.getFullYear()+"-"+l(r.getMonth()+1)+"-"+l(r.getDate())+" "+l(r.getHours())+"-"+l(r.getMinutes())+"-"+l(r.getSeconds()),i._name+=-1!=i.type.indexOf("/")?"."+i.type.split("/")[1].toString().toLowerCase():".png",f.set("feedback",f._assets.textParse(n.captions.paste,{ms:s/1e3})),f.clipboard._timer=setTimeout(function(){f.set("feedback",null),f.onChange(e,[i])},s-2))}}},clean:function(){f.clipboard._timer&&(clearTimeout(f.clipboard._timer),delete f.clipboard._timer,f.set("feedback",null))}},files:{add:function(e,t){var n,a,i=e.name,r=e.size,o=f._assets.bytesToText(r),l=e.type,d=l?l.split("/",1).toString().toLowerCase():"",u=-1!=i.indexOf(".")?i.split(".").pop().toLowerCase():"",c=i.substr(0,i.length-(-1!=i.indexOf(".")?u.length+1:u.length)),p=e.data,e=e.file||e;return f._itFl.push({name:i,title:c,size:r,size2:o,type:l,format:d,extension:u,data:p,file:e,input:"choosed"==t?s:null,html:null,upload:null,choosed:"choosed"==t,appended:"appended"==t,uploaded:"uploaded"==t}),n=f._itFl.length-1,a=f._itFl[n],a.remove=function(){f.files.remove(a)},n},list:function(e,t,a){var i=[];return $.each(f._itFl,function(n,a){if(!a.upload||a.uploaded){var r=a;(e||t)&&(r=(r.choosed?"0:/":"")+(t&&null!==f.files.getItemAttr(a,t)?f.files.getItemAttr(a,t):a["string"==typeof a.file?"file":"name"])),i.push(r)}}),i=n.onListInput&&$.isFunction(n.onListInput)&&!a?n.onListInput(f._itFl,n.listInput,l,p,o,s):i,e?JSON.stringify(i):i},check:function(e,t,a){var i=["warning",null,!1,!1];if(null!=n.limit&&a&&t.length+f._itFl.length-1>n.limit)return i[1]=f._assets.textParse(n.captions.errors.filesLimit),i[3]=!0,i;if(null!=n.maxSize&&a){r=0;if($.each(f._itFl,function(e,t){r+=t.size}),r-=e.size,$.each(t,function(e,t){r+=t.size}),r>Math.round(1e6*n.maxSize))return i[1]=f._assets.textParse(n.captions.errors.filesSizeAll),i[3]=!0,i}if(null!=n.onFilesCheck&&$.isFunction(n.onFilesCheck)&&a&&!1===n.onFilesCheck(t,n,l,p,o,s))return i[3]=!0,i;if(null!=n.extensions&&-1==$.inArray(e.extension,n.extensions)&&-1==$.inArray(e.type,n.extensions))return i[1]=f._assets.textParse(n.captions.errors.filesType,e),i;if(null!=n.fileMaxSize&&e.size>1e6*n.fileMaxSize)return i[1]=f._assets.textParse(n.captions.errors.fileSize,e),i;if(4096==e.size&&""==e.type)return i[1]=f._assets.textParse(n.captions.errors.folderUpload,e),i;var r=!1;return $.each(f._itFl,function(t,a){if(a!=e&&1==a.choosed&&a.file&&a.file.name==e.name)return r=!0,a.file.size!=e.size||a.file.type!=e.type||e.file.lastModified&&a.file.lastModified&&a.file.lastModified!=e.file.lastModified?(i[1]=f._assets.textParse(n.captions.errors.fileName,e),i[2]=!1):i[2]=!0,!1}),!r||i},append:function(e){if((e=$.isArray(e)?e:[e]).length){for(var t,a=0;a<e.length;a++)t=f._itFl[f.files.add(e[a],"appended")],n.thumbnails&&f.thumbnails.item(t);return f.set("feedback",null),f.set("listInput",null),n.afterSelect&&$.isFunction(n.afterSelect)&&n.afterSelect(l,p,o,s),1!=e.length||t}},find:function(e){var t=null;return $.each(f._itFl,function(n,a){if(a.html&&a.html.is(e))return t=a,!1}),t},remove:function(e,t){if(t||!n.onRemove||!$.isFunction(n.onRemove)||!1!==n.onRemove(e,l,p,o,s)){if(e.html&&(n.thumbnails.onItemRemove&&$.isFunction(n.thumbnails.onItemRemove)&&!t?n.thumbnails.onItemRemove(e.html,l,p,o,s):e.html.remove()),e.upload&&e.upload.$ajax&&e.upload.cancel&&e.upload.cancel(),e.input){var a=!0;$.each(f._itFl,function(n,i){if(e!=i&&(e.input==i.input||t&&e.input.get(0).files.length>1))return a=!1,!1}),a&&(f.isAddMoreMode()&&sl.length>1?(sl.splice(sl.indexOf(e.input),1),e.input.remove(),f.set("nextInput")):f.set("input",""))}f._pfrL.indexOf(e)>-1&&f._pfrL.splice(f._pfrL.indexOf(e),1),f._pfuL.indexOf(e)>-1&&f._pfuL.splice(f._pfuL.indexOf(e),1),f._itFl.indexOf(e)>-1&&f._itFl.splice(f._itFl.indexOf(e),1),e=null,0==f._itFl.length&&f.reset(),f.set("feedback",null),f.set("listInput",null)}},getItemAttr:function(e,t){var n=null;return e&&(void 0!==e[t]?n=e[t]:e.data&&void 0!==e.data[t]&&(n=e.data[t])),n},clear:function(e){for(var t=0;t<f._itFl.length;){var a=f._itFl[t];e||!a.appended?(a.html&&a.html&&f._itFl[t].html.remove(),a.upload&&a.upload.$ajax&&f.upload.cancel(a),f._itFl.splice(t,1)):t++}f.set("feedback",null),f.set("listInput",null),0==f._itFl.length&&n.onEmpty&&$.isFunction(n.onEmpty)&&n.onEmpty(l,p,o,s)}},reset:function(e){e&&(f.clipboard._timer&&f.clipboard.clean(),$.each(sl,function(e,t){e<sl.length&&t.remove()}),sl=[],f.set("input","")),f._itRl=[],f._pfuL=[],f._pfrL=[],f.files.clear(e)},destroy:function(){f.reset(!0),f.bindUnbindEvents(!1),s.removeAttr("style"),s.insertBefore(".fileuploader"),s.prop("FileUploader",null),p.remove(),p=o=l=null},_assets:{bytesToText:function(e){if(0==e)return"0 Byte";var t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(e)/Math.log(1e3));return(e/Math.pow(1e3,n)).toPrecision(3)+" "+t[n]},secondsToText:function(e,t){e=parseInt(Math.round(e),10);var n=Math.floor(e/3600),a=Math.floor((e-3600*n)/60),e=e-3600*n-60*a,i="";return(n>0||!t)&&(i+=(n<10?"0":"")+n+(t?"h ":":")),(a>0||!t)&&(i+=(a<10&&!t?"0":"")+a+(t?"m ":":")),i+=(e<10&&!t?"0":"")+e+(t?"s":"")},hasAttr:function(e,t){var n=(t=t||s).attr(e);return!(!n||void 0===n)},copyAllAttributes:function(e,t){return $.each(t.get(0).attributes,function(){"required"!=this.name&&"type"!=this.name&&e.attr(this.name,this.value)}),t.get(0).FileUploader&&(e.get(0).FileUploader=t.get(0).FileUploader),e},getAllEvents:function(e){var t=[];e=(e=e||s).get?e.get(0):e;for(var n in e)0===n.indexOf("on")&&t.push(n.slice(2));return-1==t.indexOf("change")&&t.push("change"),t.join(" ")},isIntoView:function(e){var t=$(window).scrollTop(),n=t+window.innerHeight,a=e.offset().top,i=a+e.outerHeight();return t<a&&n>i},isBlankCanvas:function(e){var t=document.createElement("canvas"),n=!1;return t.width=e.width,t.height=e.height,n=e.toDataURL()==t.toDataURL(),t=null,n},textParse:function(text,opts,noOptions){switch(opts=noOptions?opts||{}:$.extend({},{limit:n.limit,maxSize:n.maxSize,fileMaxSize:n.fileMaxSize,extensions:n.extensions?n.extensions.join(", "):null},opts),typeof text){case"string":text=text.replace(/\$\{(.*?)\}/g,function(match,a){var a=a.replace(/ /g,""),r=void 0!==opts[a]&&null!=opts[a]?opts[a]:"";if(a.indexOf(".")>-1||a.indexOf("[]")>-1){var x=a.substr(0,a.indexOf(".")>-1?a.indexOf("."):a.indexOf("[")>-1?a.indexOf("["):a.length),y=a.substring(x.length);if(opts[x])try{r=eval('opts["'+x+'"]'+y)}catch(a){r=""}}return(r=$.isFunction(r)?f._assets.textParse(r):r)||""});break;case"function":text=text(opts,l,p,o,s)}return opts=null,text},textToColor:function(e){if(!e||0==e.length)return!1;for(var t=0,n=0;t<e.length;n=e.charCodeAt(t++)+((n<<5)-n));for(var t=0,a="#";t<3;a+=("00"+(n>>2*t++&255).toString(16)).slice(-2));return a},isBrightColor:function(e){var t=function(e){var t;return e&&e.constructor==Array&&3==e.length?e:(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3])]:(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]:"undefined"!=typeof colors?colors[$.trim(e).toLowerCase()]:null};return function(e){var n=t(e);return n?.2126*n[0]+.7152*n[1]+.0722*n[2]:null}(e)>194}},isSupported:function(){return s&&s.get(0).files},isFileReaderSupported:function(){return window.File&&window.FileList&&window.FileReader},isDefaultMode:function(){return!n.upload&&!n.addMore},isAddMoreMode:function(){return!n.upload&&n.addMore},isUploadMode:function(){return n.upload},_itFl:[],_pfuL:[],_pfrL:[],disabled:!1,locked:!1,rendered:!1};return n.enableApi&&s.prop("FileUploader",{open:function(){s.trigger("click")},getOptions:function(){return n},getParentEl:function(){return p},getInputEl:function(){return s},getNewInputEl:function(){return o},getListEl:function(){return l},getListInputEl:function(){return n.listInput},getFiles:function(){return f._itFl},getChoosedFiles:function(){return f._itFl.filter(function(e){return e.choosed})},getAppendedFiles:function(){return f._itFl.filter(function(e){return e.appended})},getUploadedFiles:function(){return f._itFl.filter(function(e){return e.uploaded})},getFileList:function(e,t){return f.files.list(e,t,!0)},setOption:function(e,t){return n[e]=t,!0},findFile:function(e){return f.files.find(e)},append:function(e){return f.files.append(e)},remove:function(e){return e=e.jquery?f.files.find(e):e,f._itFl.indexOf(e)>-1&&(f.files.remove(e),!0)},reset:function(){return f.reset(!0),!0},disable:function(e){return f.set("disabled",!0),e&&(f.locked=!0),!0},enable:function(){return f.set("disabled",!1),f.locked=!1,!0},destroy:function(){return f.destroy(),!0},isEmpty:function(){return 0==f._itFl.length},isDisabled:function(){return f.disabled},isRendered:function(){return f.rendered},assets:f._assets,getPluginMode:function(){return f.isDefaultMode()?"default":f.isAddMoreMode()?"addMore":f.isUploadMode()?"upload":void 0}}),f.init(),this})},window.$.fileuploader={getInstance:function(e){return(e.prop?e:$(e)).prop("FileUploader")}},$.fn.fileuploader.defaults={limit:null,maxSize:null,fileMaxSize:null,extensions:null,changeInput:!0,inputNameBrackets:!0,theme:"default",thumbnails:{box:'<div class="fileuploader-items"><ul class="fileuploader-items-list"></ul></div>',boxAppendTo:null,item:'<li class="fileuploader-item"><div class="columns"><div class="column-thumbnail">${image}</div><div class="column-title"><div title="${name}">${name}</div><span>${size2}</span></div><div class="column-actions"><a class="fileuploader-action fileuploader-action-remove" title="Remove"><i></i></a></div></div><div class="progress-bar2">${progressBar}<span></span></div></li>',item2:'<li class="fileuploader-item"><div class="columns"><a href="${file}" target="_blank"><div class="column-thumbnail">${image}</div><div class="column-title"><div title="${name}">${name}</div><span>${size2}</span></div></a><div class="column-actions"><a href="${file}" class="fileuploader-action fileuploader-action-download" title="Download" download><i></i></a><a class="fileuploader-action fileuploader-action-remove" title="Remove"><i></i></a></div></div></li>',itemPrepend:!1,removeConfirmation:!0,startImageRenderer:!0,synchronImages:!0,canvasImage:!0,_selectors:{list:".fileuploader-items-list",item:".fileuploader-item",start:".fileuploader-action-start",retry:".fileuploader-action-retry",remove:".fileuploader-action-remove"},beforeShow:null,onItemShow:null,onItemRemove:function(e){e.children().animate({opacity:0},200,function(){setTimeout(function(){e.slideUp(200,function(){e.remove()})},100)})},onImageLoaded:null},files:null,upload:null,dragDrop:!0,addMore:!1,clipboardPaste:!0,listInput:!0,enableApi:!1,listeners:null,onSupportError:null,beforeRender:null,afterRender:null,beforeSelect:null,onFilesCheck:null,onSelect:null,afterSelect:null,onListInput:null,onRemove:null,onEmpty:null,dialogs:{alert:function(e){return alert(e)},confirm:function(e,t){confirm(e)&&t()}},captions:{button:function(e){return"Choose "+(1==e.limit?"File":"Files")},feedback:function(e){return"Choose "+(1==e.limit?"file":"files")+" to upload"},feedback2:function(e){return e.length+" "+(e.length>1?" files were":" file was")+" chosen"},drop:"Drop the files here to Upload",paste:'<div class="fileuploader-pending-loader"><div class="left-half" style="animation-duration: ${ms}s"></div><div class="spinner" style="animation-duration: ${ms}s"></div><div class="right-half" style="animation-duration: ${ms}s"></div></div> Pasting a file, click here to cancel.',removeConfirmation:"Are you sure you want to remove this file?",errors:{filesLimit:"Only ${limit} files are allowed to be uploaded.",filesType:"Only ${extensions} files are allowed to be uploaded.",fileSize:"${name} is too large! Please choose a file up to ${fileMaxSize}MB.",filesSizeAll:"Files that you choosed are too large! Please upload files up to ${maxSize} MB.",fileName:"File with the name ${name} is already selected.",folderUpload:"You are not allowed to upload folders."}}}}(jQuery),jQuery.trumbowyg={langs:{en:{viewHTML:"View HTML",undo:"Undo",redo:"Redo",formatting:"Formatting",p:"Paragraph",blockquote:"Quote",code:"Code",header:"Header",bold:"Bold",italic:"Italic",strikethrough:"Stroke",underline:"Underline",strong:"Strong",em:"Emphasis",del:"Deleted",superscript:"Superscript",subscript:"Subscript",unorderedList:"Unordered list",orderedList:"Ordered list",insertImage:"Insert Image",link:"Link",createLink:"Insert link",unlink:"Remove link",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",horizontalRule:"Insert horizontal rule",removeformat:"Remove format",fullscreen:"Fullscreen",close:"Close",submit:"Confirm",reset:"Cancel",required:"Required",description:"Description",title:"Title",text:"Text",target:"Target"}},plugins:{},svgPath:null,hideButtonTexts:null},function(e,t,n,a){"use strict";a.fn.trumbowyg=function(e,t){var n="trumbowyg";if(e===Object(e)||!e)return this.each(function(){a(this).data(n)||a(this).data(n,new i(this,e))});if(1===this.length)try{var r=a(this).data(n);switch(e){case"execCmd":return r.execCmd(t.cmd,t.param,t.forceCss);case"openModal":return r.openModal(t.title,t.content);case"closeModal":return r.closeModal();case"openModalInsert":return r.openModalInsert(t.title,t.fields,t.callback);case"saveRange":return r.saveRange();case"getRange":return r.range;case"getRangeText":return r.getRangeText();case"restoreRange":return r.restoreRange();case"enable":return r.toggleDisable(!1);case"disable":return r.toggleDisable(!0);case"destroy":return r.destroy();case"empty":return r.empty();case"html":return r.html(t)}}catch(e){}return!1};var i=function(i,r){var o=this,l="trumbowyg-icons";o.doc=i.ownerDocument||n,o.$ta=a(i),o.$c=a(i),null!=(r=r||{}).lang||null!=a.trumbowyg.langs[r.lang]?o.lang=a.extend(!0,{},a.trumbowyg.langs.en,a.trumbowyg.langs[r.lang]):o.lang=a.trumbowyg.langs.en,o.hideButtonTexts=null!=a.trumbowyg.hideButtonTexts?a.trumbowyg.hideButtonTexts:r.hideButtonTexts;var s=null!=a.trumbowyg.svgPath?a.trumbowyg.svgPath:r.svgPath;if(o.hasSvg=!1!==s,o.svgPath=o.doc.querySelector("base")?t.location.href.split("#")[0]:"",0===a("#"+l,o.doc).length&&!1!==s){if(null==s)try{throw new Error}catch(e){var d=e.stack.split("\n");for(var u in d)if(d[u].match(/http[s]?:\/\//)){(s=d[Number(u)].match(/((http[s]?:\/\/.+\/)([^\/]+\.js))(\?.*)?:/)[1].split("/")).pop(),s=s.join("/")+"/ui/icons.svg";break}}var c=o.doc.createElement("div");c.id=l,o.doc.body.insertBefore(c,o.doc.body.childNodes[0]),a.ajax({async:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"xml",url:s,data:null,beforeSend:null,complete:null,success:function(e){c.innerHTML=(new XMLSerializer).serializeToString(e.documentElement)}})}var f=o.lang.header,p=function(){return(t.chrome||t.Intl&&Intl.v8BreakIterator)&&"CSS"in t};o.btnsDef={viewHTML:{fn:"toggle"},undo:{isSupported:p,key:"Z"},redo:{isSupported:p,key:"Y"},p:{fn:"formatBlock"},blockquote:{fn:"formatBlock"},h1:{fn:"formatBlock",title:f+" 1"},h2:{fn:"formatBlock",title:f+" 2"},h3:{fn:"formatBlock",title:f+" 3"},h4:{fn:"formatBlock",title:f+" 4"},subscript:{tag:"sub"},superscript:{tag:"sup"},bold:{key:"B",tag:"b"},italic:{key:"I",tag:"i"},underline:{tag:"u"},strikethrough:{tag:"strike"},strong:{fn:"bold",key:"B"},em:{fn:"italic",key:"I"},del:{fn:"strikethrough"},createLink:{key:"K",tag:"a"},unlink:{},insertImage:{},justifyLeft:{tag:"left",forceCss:!0},justifyCenter:{tag:"center",forceCss:!0},justifyRight:{tag:"right",forceCss:!0},justifyFull:{tag:"justify",forceCss:!0},unorderedList:{fn:"insertUnorderedList",tag:"ul"},orderedList:{fn:"insertOrderedList",tag:"ol"},horizontalRule:{fn:"insertHorizontalRule"},removeformat:{},fullscreen:{class:"trumbowyg-not-disable"},close:{fn:"destroy",class:"trumbowyg-not-disable"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"],ico:"p"},link:{dropdown:["createLink","unlink"]}},o.o=a.extend(!0,{},{lang:"en",fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,prefix:"trumbowyg-",semantic:!0,resetCss:!1,removeformatPasted:!1,tagsToRemove:[],btnsGrps:{design:["bold","italic","underline","strikethrough"],semantic:["strong","em","del"],justify:["justifyLeft","justifyCenter","justifyRight","justifyFull"],lists:["unorderedList","orderedList"]},btns:[["viewHTML"],["undo","redo"],["formatting"],"btnGrp-semantic",["superscript","subscript"],["link"],["insertImage"],"btnGrp-justify","btnGrp-lists",["horizontalRule"],["removeformat"],["fullscreen"]],btnsDef:{},inlineElementsSelector:"a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u",pasteHandlers:[],imgDblClickHandler:function(){var e=a(this),t=e.attr("src"),n="(Base64)";return 0===t.indexOf("data:image")&&(t=n),o.openModalInsert(o.lang.insertImage,{url:{label:"URL",value:t,required:!0},alt:{label:o.lang.description,value:e.attr("alt")}},function(t){return t.src!==n&&e.attr({src:t.src}),e.attr({alt:t.alt}),!0}),!1},plugins:{}},r),o.disabled=o.o.disabled||"TEXTAREA"===i.nodeName&&i.disabled,r.btns?o.o.btns=r.btns:o.o.semantic||(o.o.btns[4]="btnGrp-design"),a.each(o.o.btnsDef,function(e,t){o.addBtnDef(e,t)}),o.eventNamespace="trumbowyg-event",o.keys=[],o.tagToButton={},o.tagHandlers=[],o.pasteHandlers=[].concat(o.o.pasteHandlers),o.isIE=-1!==e.userAgent.indexOf("MSIE")||-1!==e.appVersion.indexOf("Trident/"),o.init()};i.prototype={init:function(){var e=this;e.height=e.$ta.height(),e.initPlugins();try{e.doc.execCommand("enableObjectResizing",!1,!1),e.doc.execCommand("defaultParagraphSeparator",!1,"p")}catch(e){}e.buildEditor(),e.buildBtnPane(),e.fixedBtnPaneEvents(),e.buildOverlay(),setTimeout(function(){e.disabled&&e.toggleDisable(!0),e.$c.trigger("tbwinit")})},addBtnDef:function(e,t){this.btnsDef[e]=t},buildEditor:function(){var e=this,n=e.o.prefix,i="";e.$box=a("<div/>",{class:n+"box "+n+"editor-visible "+n+e.o.lang+" trumbowyg"}),e.isTextarea=e.$ta.is("textarea"),e.isTextarea?(i=e.$ta.val(),e.$ed=a("<div/>"),e.$box.insertAfter(e.$ta).append(e.$ed,e.$ta)):(e.$ed=e.$ta,i=e.$ed.html(),e.$ta=a("<textarea/>",{name:e.$ta.attr("id"),height:e.height}).val(i),e.$box.insertAfter(e.$ed).append(e.$ta,e.$ed),e.syncCode()),e.$ta.addClass(n+"textarea").attr("tabindex",-1),e.$ed.addClass(n+"editor").attr({contenteditable:!0,dir:e.lang._dir||"ltr"}).html(i),e.o.tabindex&&e.$ed.attr("tabindex",e.o.tabindex),e.$c.is("[placeholder]")&&e.$ed.attr("placeholder",e.$c.attr("placeholder")),e.o.resetCss&&e.$ed.addClass(n+"reset-css"),e.o.autogrow||e.$ta.add(e.$ed).css({height:e.height}),e.semanticCode();var r,o=!1,l=!1,s=e.isIE?"keyup":"input";e.$ed.on("dblclick","img",e.o.imgDblClickHandler).on("keydown",function(t){if(t.ctrlKey){o=!0;var n=e.keys[String.fromCharCode(t.which).toUpperCase()];try{return e.execCmd(n.fn,n.param),!1}catch(e){}}}).on("compositionstart compositionupdate",function(){l=!0}).on(s+" compositionend",function(t){if("compositionend"===t.type)l=!1;else if(l)return;var n=t.which;n>=37&&40>=n||(!t.ctrlKey||89!==n&&90!==n?o||17===n?void 0===t.which&&e.semanticCode(!1,!1,!0):(e.semanticCode(!1,13===n),e.$c.trigger("tbwchange")):e.$c.trigger("tbwchange"),setTimeout(function(){o=!1},200))}).on("mouseup keydown keyup",function(){clearTimeout(r),r=setTimeout(function(){e.updateButtonPaneStatus()},50)}).on("focus blur",function(t){e.$c.trigger("tbw"+t.type),"blur"===t.type&&a("."+n+"active-button",e.$btnPane).removeClass(n+"active-button "+n+"active")}).on("cut",function(){setTimeout(function(){e.semanticCode(!1,!0),e.$c.trigger("tbwchange")},0)}).on("paste",function(n){if(e.o.removeformatPasted){n.preventDefault();try{var i=t.clipboardData.getData("Text");try{e.doc.selection.createRange().pasteHTML(i)}catch(t){e.doc.getSelection().getRangeAt(0).insertNode(e.doc.createTextNode(i))}}catch(t){e.execCmd("insertText",(n.originalEvent||n).clipboardData.getData("text/plain"))}}a.each(e.pasteHandlers,function(e,t){t(n)}),setTimeout(function(){e.semanticCode(!1,!0),e.$c.trigger("tbwpaste",n)},0)}),e.$ta.on("keyup paste",function(){e.$c.trigger("tbwchange")}),e.$box.on("keydown",function(t){return 27===t.which&&1===a("."+n+"modal-box",e.$box).length?(e.closeModal(),!1):void 0})},buildBtnPane:function(){var e=this,t=e.o.prefix,n=e.$btnPane=a("<div/>",{class:t+"button-pane"});a.each(e.o.btns,function(i,r){try{var o=r.split("btnGrp-");null!=o[1]&&(r=e.o.btnsGrps[o[1]])}catch(e){}a.isArray(r)||(r=[r]);var l=a("<div/>",{class:t+"button-group "+(r.indexOf("fullscreen")>=0?t+"right":"")});a.each(r,function(t,n){try{var a;e.isSupportedBtn(n)&&(a=e.buildBtn(n)),l.append(a)}catch(e){}}),n.append(l)}),e.$box.prepend(n)},buildBtn:function(e){var t=this,n=t.o.prefix,i=t.btnsDef[e],r=i.dropdown,o=null==i.hasIcon||i.hasIcon,l=t.lang[e]||e,s=a("<button/>",{type:"button",class:n+e+"-button "+(i.class||"")+(o?"":" "+n+"textual-button"),html:t.hasSvg&&o?'<svg><use xlink:href="'+t.svgPath+"#"+n+(i.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>':t.hideButtonTexts?"":i.text||i.title||t.lang[e]||e,title:(i.title||i.text||l)+(i.key?" (Ctrl + "+i.key+")":""),tabindex:-1,mousedown:function(){return(!r||a("."+e+"-"+n+"dropdown",t.$box).is(":hidden"))&&a("body",t.doc).trigger("mousedown"),!(t.$btnPane.hasClass(n+"disable")&&!a(this).hasClass(n+"active")&&!a(this).hasClass(n+"not-disable"))&&(t.execCmd(!!r&&"dropdown"||i.fn||e,i.param||e,i.forceCss||!1),!1)}});if(r){s.addClass(n+"open-dropdown");var d=n+"dropdown",u=a("<div/>",{class:d+"-"+e+" "+d+" "+n+"fixed-top","data-dropdown":e});a.each(r,function(e,n){t.btnsDef[n]&&t.isSupportedBtn(n)&&u.append(t.buildSubBtn(n))}),t.$box.append(u.hide())}else i.key&&(t.keys[i.key]={fn:i.fn||e,param:i.param||e});return r||(t.tagToButton[(i.tag||e).toLowerCase()]=e),s},buildSubBtn:function(e){var t=this,n=t.o.prefix,i=t.btnsDef[e],r=null==i.hasIcon||i.hasIcon;return i.key&&(t.keys[i.key]={fn:i.fn||e,param:i.param||e}),t.tagToButton[(i.tag||e).toLowerCase()]=e,a("<button/>",{type:"button",class:n+e+"-dropdown-button"+(i.ico?" "+n+i.ico+"-button":""),html:t.hasSvg&&r?'<svg><use xlink:href="'+t.svgPath+"#"+n+(i.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>'+(i.text||i.title||t.lang[e]||e):i.text||i.title||t.lang[e]||e,title:i.key?" (Ctrl + "+i.key+")":null,style:i.style||null,mousedown:function(){return a("body",t.doc).trigger("mousedown"),t.execCmd(i.fn||e,i.param||e,i.forceCss||!1),!1}})},isSupportedBtn:function(e){try{return this.btnsDef[e].isSupported()}catch(e){}return!0},buildOverlay:function(){var e=this;return e.$overlay=a("<div/>",{class:e.o.prefix+"overlay"}).css({top:e.$btnPane.outerHeight(),height:e.$ed.outerHeight()+1+"px"}).appendTo(e.$box),e.$overlay},showOverlay:function(){var e=this;a(t).trigger("scroll"),e.$overlay.fadeIn(200),e.$box.addClass(e.o.prefix+"box-blur")},hideOverlay:function(){var e=this;e.$overlay.fadeOut(50),e.$box.removeClass(e.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var e=this,n=e.o.fixedFullWidth,i=e.$box;e.o.fixedBtnPane&&(e.isFixed=!1,a(t).on("scroll."+e.eventNamespace+" resize."+e.eventNamespace,function(){if(i){e.syncCode();var r=a(t).scrollTop(),o=i.offset().top+1,l=e.$btnPane,s=l.outerHeight()-2;r-o>0&&r-o-e.height<0?(e.isFixed||(e.isFixed=!0,l.css({position:"fixed",top:0,left:n?"0":"auto",zIndex:7}),a([e.$ta,e.$ed]).css({marginTop:l.height()})),l.css({width:n?"100%":i.width()-1+"px"}),a("."+e.o.prefix+"fixed-top",i).css({position:n?"fixed":"absolute",top:n?s:s+(r-o)+"px",zIndex:15})):e.isFixed&&(e.isFixed=!1,l.removeAttr("style"),a([e.$ta,e.$ed]).css({marginTop:0}),a("."+e.o.prefix+"fixed-top",i).css({position:"absolute",top:s}))}}))},toggleDisable:function(e){var t=this,n=t.o.prefix;t.disabled=e,e?t.$ta.attr("disabled",!0):t.$ta.removeAttr("disabled"),t.$box.toggleClass(n+"disabled",e),t.$ed.attr("contenteditable",!e)},destroy:function(){var e=this,n=e.o.prefix,i=e.height;e.isTextarea?e.$box.after(e.$ta.css({height:i}).val(e.html()).removeClass(n+"textarea").show()):e.$box.after(e.$ed.css({height:i}).removeClass(n+"editor").removeAttr("contenteditable").html(e.html()).show()),e.$ed.off("dblclick","img"),e.destroyPlugins(),e.$box.remove(),e.$c.removeData("trumbowyg"),a("body").removeClass(n+"body-fullscreen"),e.$c.trigger("tbwclose"),a(t).off("scroll."+e.eventNamespace+" resize."+e.eventNamespace)},empty:function(){this.$ta.val(""),this.syncCode(!0)},toggle:function(){var e=this,t=e.o.prefix;e.semanticCode(!1,!0),setTimeout(function(){e.doc.activeElement.blur(),e.$box.toggleClass(t+"editor-hidden "+t+"editor-visible"),e.$btnPane.toggleClass(t+"disable"),a("."+t+"viewHTML-button",e.$btnPane).toggleClass(t+"active"),e.$box.hasClass(t+"editor-visible")?e.$ta.attr("tabindex",-1):e.$ta.removeAttr("tabindex")},0)},dropdown:function(e){var n=this,i=n.doc,r=n.o.prefix,o=a("[data-dropdown="+e+"]",n.$box),l=a("."+r+e+"-button",n.$btnPane),s=o.is(":hidden");if(a("body",i).trigger("mousedown"),s){var d=l.offset().left;l.addClass(r+"active"),o.css({position:"absolute",top:l.offset().top-n.$btnPane.offset().top+l.outerHeight(),left:n.o.fixedFullWidth&&n.isFixed?d+"px":d-n.$btnPane.offset().left+"px"}).show(),a(t).trigger("scroll"),a("body",i).on("mousedown."+n.eventNamespace,function(e){o.is(e.target)||(a("."+r+"dropdown",i).hide(),a("."+r+"active",i).removeClass(r+"active"),a("body",i).off("mousedown."+n.eventNamespace))})}},html:function(e){var t=this;return null!=e?(t.$ta.val(e),t.syncCode(!0),t):t.$ta.val()},syncTextarea:function(){var e=this;e.$ta.val(e.$ed.text().trim().length>0||e.$ed.find("hr,img,embed,iframe,input").length>0?e.$ed.html():"")},syncCode:function(e){var t=this;!e&&t.$ed.is(":visible")?t.syncTextarea():t.$ed.html(t.$ta.val()),t.o.autogrow&&(t.height=t.$ed.height(),t.height!==t.$ta.css("height")&&(t.$ta.css({height:t.height}),t.$c.trigger("tbwresize")))},semanticCode:function(e,t,n){var i=this;if(i.saveRange(),i.syncCode(e),a(i.o.tagsToRemove.join(","),i.$ed).remove(),i.o.semantic){if(i.semanticTag("b","strong"),i.semanticTag("i","em"),t){var r=i.o.inlineElementsSelector,o=":not("+r+")";i.$ed.contents().filter(function(){return 3===this.nodeType&&this.nodeValue.trim().length>0}).wrap("<span data-tbw/>");var l=function(e){if(0!==e.length){var t=e.nextUntil(o).addBack().wrapAll("<p/>").parent(),n=t.nextAll(r).first();t.next("br").remove(),l(n)}};l(i.$ed.children(r).first()),i.semanticTag("div","p",!0),i.$ed.find("p").filter(function(){return(!i.range||this!==i.range.startContainer)&&(0===a(this).text().trim().length&&0===a(this).children().not("br,span").length)}).contents().unwrap(),a("[data-tbw]",i.$ed).contents().unwrap(),i.$ed.find("p:empty").remove()}n||i.restoreRange(),i.syncTextarea()}},semanticTag:function(e,t,n){a(e,this.$ed).each(function(){var e=a(this);e.wrap("<"+t+"/>"),n&&a.each(e.prop("attributes"),function(){e.parent().attr(this.name,this.value)}),e.contents().unwrap()})},createLink:function(){for(var e,t,n,i=this,r=i.doc.getSelection(),o=r.focusNode;["A","DIV"].indexOf(o.nodeName)<0;)o=o.parentNode;if(o&&"A"===o.nodeName){var l=a(o);e=l.attr("href"),t=l.attr("title"),n=l.attr("target");var s=i.doc.createRange();s.selectNode(o),r.addRange(s)}i.saveRange(),i.openModalInsert(i.lang.createLink,{url:{label:"URL",required:!0,value:e},title:{label:i.lang.title,value:t},text:{label:i.lang.text,value:i.getRangeText()},target:{label:i.lang.target,value:n}},function(e){var t=a(['<a href="',e.url,'">',e.text,"</a>"].join(""));return e.title.length>0&&t.attr("title",e.title),e.target.length>0&&t.attr("target",e.target),i.range.deleteContents(),i.range.insertNode(t[0]),!0})},unlink:function(){var e=this,t=e.doc.getSelection(),n=t.focusNode;if(t.isCollapsed){for(;["A","DIV"].indexOf(n.nodeName)<0;)n=n.parentNode;if(n&&"A"===n.nodeName){var a=e.doc.createRange();a.selectNode(n),t.addRange(a)}}e.execCmd("unlink",void 0,void 0,!0)},insertImage:function(){var e=this;e.saveRange(),e.openModalInsert(e.lang.insertImage,{url:{label:"URL",required:!0},alt:{label:e.lang.description,value:e.getRangeText()}},function(t){return e.execCmd("insertImage",t.url),a('img[src="'+t.url+'"]:not([alt])',e.$box).attr("alt",t.alt),!0})},fullscreen:function(){var e,n=this,i=n.o.prefix,r=i+"fullscreen";n.$box.toggleClass(r),e=n.$box.hasClass(r),a("body").toggleClass(i+"body-fullscreen",e),a(t).trigger("scroll"),n.$c.trigger("tbw"+(e?"open":"close")+"fullscreen")},execCmd:function(e,t,n,a){var i=this;a=!!a||"","dropdown"!==e&&i.$ed.focus();try{i.doc.execCommand("styleWithCSS",!1,n||!1)}catch(e){}try{i[e+a](t)}catch(n){try{e(t)}catch(n){"insertHorizontalRule"===e?t=void 0:"formatBlock"===e&&i.isIE&&(t="<"+t+">"),i.doc.execCommand(e,!1,t),i.syncCode(),i.semanticCode(!1,!0)}"dropdown"!==e&&(i.updateButtonPaneStatus(),i.$c.trigger("tbwchange"))}},openModal:function(e,n){var i=this,r=i.o.prefix;if(a("."+r+"modal-box",i.$box).length>0)return!1;i.saveRange(),i.showOverlay(),i.$btnPane.addClass(r+"disable");var o=a("<div/>",{class:r+"modal "+r+"fixed-top"}).css({top:i.$btnPane.height()}).appendTo(i.$box);i.$overlay.one("click",function(){return o.trigger("tbwcancel"),!1});var l=a("<form/>",{action:"",html:n}).on("submit",function(){return o.trigger("tbwconfirm"),!1}).on("reset",function(){return o.trigger("tbwcancel"),!1}),s=a("<div/>",{class:r+"modal-box",html:l}).css({top:"-"+i.$btnPane.outerHeight()+"px",opacity:0}).appendTo(o).animate({top:0,opacity:1},100);return a("<span/>",{text:e,class:r+"modal-title"}).prependTo(s),o.height(s.outerHeight()+10),a("input:first",s).focus(),i.buildModalBtn("submit",s),i.buildModalBtn("reset",s),a(t).trigger("scroll"),o},buildModalBtn:function(e,t){var n=this,i=n.o.prefix;return a("<button/>",{class:i+"modal-button "+i+"modal-"+e,type:e,text:n.lang[e]||e}).appendTo(a("form",t))},closeModal:function(){var e=this,t=e.o.prefix;e.$btnPane.removeClass(t+"disable"),e.$overlay.off();var n=a("."+t+"modal-box",e.$box);n.animate({top:"-"+n.height()},100,function(){n.parent().remove(),e.hideOverlay()}),e.restoreRange()},openModalInsert:function(e,t,n){var i=this,r=i.o.prefix,o=i.lang,l="",s="tbwconfirm";return a.each(t,function(e,t){var n=t.label,a=t.name||e,i=t.attributes||{},s=Object.keys(i).map(function(e){return e+'="'+i[e]+'"'}).join(" ");l+='<label><input type="'+(t.type||"text")+'" name="'+a+'" value="'+(t.value||"").replace(/"/g,"&quot;")+'"'+s+'><span class="'+r+'input-infos"><span>'+(n?o[n]?o[n]:n:o[e]?o[e]:e)+"</span></span></label>"}),i.openModal(e,l).on(s,function(){var e=a("form",a(this)),r=!0,o={};a.each(t,function(t,n){var l=a('input[name="'+t+'"]',e);"checkbox"===l.attr("type").toLowerCase()?o[t]=l.is(":checked"):o[t]=a.trim(l.val()),n.required&&""===o[t]?(r=!1,i.addErrorOnModalField(l,i.lang.required)):n.pattern&&!n.pattern.test(o[t])&&(r=!1,i.addErrorOnModalField(l,n.patternError))}),r&&(i.restoreRange(),n(o,t)&&(i.syncCode(),i.$c.trigger("tbwchange"),i.closeModal(),a(this).off(s)))}).one("tbwcancel",function(){a(this).off(s),i.closeModal()})},addErrorOnModalField:function(e,t){var n=this.o.prefix,i=e.parent();e.on("change keyup",function(){i.removeClass(n+"input-error")}),i.addClass(n+"input-error").find("input+span").append(a("<span/>",{class:n+"msg-error",text:t}))},saveRange:function(){var e=this,t=e.doc.getSelection();if(e.range=null,t.rangeCount){var n,a=e.range=t.getRangeAt(0),i=e.doc.createRange();i.selectNodeContents(e.$ed[0]),i.setEnd(a.startContainer,a.startOffset),n=(i+"").length,e.metaRange={start:n,end:n+(a+"").length}}},restoreRange:function(){var e,t=this,n=t.metaRange,a=t.range,i=t.doc.getSelection();if(a){if(n&&n.start!==n.end){var r,o=0,l=[t.$ed[0]],s=!1,d=!1;for(e=t.doc.createRange();!d&&(r=l.pop());)if(3===r.nodeType){var u=o+r.length;!s&&n.start>=o&&n.start<=u&&(e.setStart(r,n.start-o),s=!0),s&&n.end>=o&&n.end<=u&&(e.setEnd(r,n.end-o),d=!0),o=u}else for(var c=r.childNodes,f=c.length;f>0;)f-=1,l.push(c[f])}i.removeAllRanges(),i.addRange(e||a)}},getRangeText:function(){return this.range+""},updateButtonPaneStatus:function(){var e=this,t=e.o.prefix,n=e.getTagsRecursive(e.doc.getSelection().focusNode),i=t+"active-button "+t+"active";a("."+t+"active-button",e.$btnPane).removeClass(i),a.each(n,function(n,r){var o=e.tagToButton[r.toLowerCase()],l=a("."+t+o+"-button",e.$btnPane);if(l.length>0)l.addClass(i);else try{var s=(l=a("."+t+"dropdown ."+t+o+"-dropdown-button",e.$box)).parent().data("dropdown");a("."+t+s+"-button",e.$box).addClass(i)}catch(e){}})},getTagsRecursive:function(e,t){var n=this;if(t=t||(e&&e.tagName?[e.tagName]:[]),!e||!e.parentNode)return t;var i=(e=e.parentNode).tagName;return"DIV"===i?t:("P"===i&&""!==e.style.textAlign&&t.push(e.style.textAlign),a.each(n.tagHandlers,function(a,i){t=t.concat(i(e,n))}),t.push(i),n.getTagsRecursive(e,t))},initPlugins:function(){var e=this;e.loadedPlugins=[],a.each(a.trumbowyg.plugins,function(t,n){(!n.shouldInit||n.shouldInit(e))&&(n.init(e),n.tagHandler&&e.tagHandlers.push(n.tagHandler),e.loadedPlugins.push(n))})},destroyPlugins:function(){a.each(this.loadedPlugins,function(e,t){t.destroy&&t.destroy()})}}}(navigator,window,document,jQuery),function(e,t){if(e.JSON)if("function"==typeof define&&define.amd)define(function(){return t(e)});else if("object"==typeof module&&"object"==typeof module.exports)module.exports=t(e);else{var n=!e.Nette||!e.Nette.noInit;e.Nette=t(e),n&&e.Nette.initOnLoad()}}("undefined"!=typeof window?window:this,function(e){function p(e){return function(t){return e.call(this,t)}}var d={formErrors:[],version:"2.4",addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n):"DOMContentLoaded"===t?e.attachEvent("onreadystatechange",function(){"complete"===e.readyState&&n.call(this)}):e.attachEvent("on"+t,p(n))},getValue:function(e){var t;if(e){if(e.tagName){if("radio"===e.type){n=e.form.elements;for(t=0;t<n.length;t++)if(n[t].name===e.name&&n[t].checked)return n[t].value;return null}if("file"===e.type)return e.files||e.value;if("select"===e.tagName.toLowerCase()){t=e.selectedIndex;var n=e.options,a=[];if("select-one"===e.type)return 0>t?null:n[t].value;for(t=0;t<n.length;t++)n[t].selected&&a.push(n[t].value);return a}if(e.name&&e.name.match(/\[\]$/)){for(n=e.form.elements[e.name].tagName?[e]:e.form.elements[e.name],a=[],t=0;t<n.length;t++)("checkbox"!==n[t].type||n[t].checked)&&a.push(n[t].value);return a}return"checkbox"===e.type?e.checked:"textarea"===e.tagName.toLowerCase()?e.value.replace("\r",""):e.value.replace("\r","").replace(/^\s+|\s+$/g,"")}return e[0]?d.getValue(e[0]):null}return null},getEffectiveValue:function(e){var t=d.getValue(e);return e.getAttribute&&t===e.getAttribute("data-nette-empty-value")&&(t=""),t},validateControl:function(e,t,n,a,i){e=e.tagName?e:e[0],t=t||d.parseJSON(e.getAttribute("data-nette-rules")),a=void 0===a?{value:d.getEffectiveValue(e)}:a;for(var r=0,o=t.length;r<o;r++){var l=t[r],s=l.op.match(/(~)?([^?]+)/),u=l.control?e.form.elements.namedItem(l.control):e;if(l.neg=s[1],l.op=s[2],l.condition=!!l.rules,u)if("optional"===l.op)i=!d.validateRule(e,":filled",null,a);else if((!i||l.condition||":filled"===l.op)&&(u=u.tagName?u:u[0],s=e===u?a:{value:d.getEffectiveValue(u)},null!==(s=d.validateRule(u,l.op,l.arg,s))))if(l.neg&&(s=!s),l.condition&&s){if(!d.validateControl(e,l.rules,n,a,":blank"!==l.op&&i))return!1}else if(!l.condition&&!s&&!d.isDisabled(u)){if(!n){var c=d.isArray(l.arg)?l.arg:[l.arg];t=l.msg.replace(/%(value|\d+)/g,function(t,n){return d.getValue("value"===n?u:e.form.elements.namedItem(c[n].control))}),d.addError(u,t)}return!1}}return!("number"===e.type&&!e.validity.valid)||(n||d.addError(e,"Please enter a valid value."),!1)},validateForm:function(e,t){var n=e.form||e,a=!1;if(d.formErrors=[],n["nette-submittedBy"]&&null!==n["nette-submittedBy"].getAttribute("formnovalidate")){if(!(a=d.parseJSON(n["nette-submittedBy"].getAttribute("data-nette-validation-scope"))).length)return d.showFormErrors(n,[]),!0;a=new RegExp("^("+a.join("-|")+"-)")}var i,r,o={};for(i=0;i<n.elements.length;i++)if(!(r=n.elements[i]).tagName||r.tagName.toLowerCase()in{input:1,select:1,textarea:1,button:1}){if("radio"===r.type){if(o[r.name])continue;o[r.name]=!0}if(!(a&&!r.name.replace(/]\[|\[|]|$/g,"-").match(a)||d.isDisabled(r)||d.validateControl(r,null,t)||d.formErrors.length))return!1}return a=!d.formErrors.length,d.showFormErrors(n,d.formErrors),a},isDisabled:function(e){if("radio"===e.type){for(var t=0,n=e.form.elements;t<n.length;t++)if(n[t].name===e.name&&!n[t].disabled)return!1;return!0}return e.disabled},addError:function(e,t){d.formErrors.push({element:e,message:t})},showFormErrors:function(e,t){for(var n,a=[],i=0;i<t.length;i++){var r=t[i].element,o=t[i].message;d.inArray(a,o)||(a.push(o),!n&&r.focus&&(n=r))}a.length&&(alert(a.join("\n")),n&&n.focus())},expandRuleArgument:function(e,t){if(t&&t.control){var n=e.elements.namedItem(t.control),a={value:d.getEffectiveValue(n)};d.validateControl(n,null,!0,a),t=a.value}return t}},t=!1;return d.validateRule=function(e,n,a,i){i=void 0===i?{value:d.getEffectiveValue(e)}:i,":"===n.charAt(0)&&(n=n.substr(1)),n=(n=n.replace("::","_")).replace(/\\/g,"");var r=d.isArray(a)?a.slice(0):[a];if(!t){t=!0;for(var o=0,l=r.length;o<l;o++)r[o]=d.expandRuleArgument(e.form,r[o]);t=!1}return d.validators[n]?d.validators[n](e,d.isArray(a)?r:r[0],i.value,i):null},d.validators={filled:function(t,n,a){return!("number"!==t.type||!t.validity.badInput)||""!==a&&!1!==a&&null!==a&&(!d.isArray(a)||!!a.length)&&(!e.FileList||!(a instanceof e.FileList)||a.length)},blank:function(e,t,n){return!d.validators.filled(e,t,n)},valid:function(e){return d.validateControl(e,null,!0)},equal:function(e,t,n){function a(e){return"number"==typeof e||"string"==typeof e?""+e:!0===e?"1":""}if(void 0===t)return null;n=d.isArray(n)?n:[n],t=d.isArray(t)?t:[t],e=0;var i=n.length;e:for(;e<i;e++){for(var r=0,o=t.length;r<o;r++)if(a(n[e])===a(t[r]))continue e;return!1}return!0},notEqual:function(e,t,n){return void 0===t?null:!d.validators.equal(e,t,n)},minLength:function(e,t,n){if("number"===e.type){if(e.validity.tooShort)return!1;if(e.validity.badInput)return null}return n.length>=t},maxLength:function(e,t,n){if("number"===e.type){if(e.validity.tooLong)return!1;if(e.validity.badInput)return null}return n.length<=t},length:function(e,t,n){if("number"===e.type){if(e.validity.tooShort||e.validity.tooLong)return!1;if(e.validity.badInput)return null}return(null===(t=d.isArray(t)?t:[t,t])[0]||n.length>=t[0])&&(null===t[1]||n.length<=t[1])},email:function(e,t,n){return/^("([ !#-[\]-~]|\\[ -~])+"|[-a-z0-9!#$%&'*+\/=?^_`{|}~]+(\.[-a-z0-9!#$%&'*+\/=?^_`{|}~]+)*)@([0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)+[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?$/i.test(n)},url:function(e,t,n,a){return/^[a-z\d+.-]+:/.test(n)||(n="http://"+n),!!/^https?:\/\/((([-_0-9a-z\u00C0-\u02FF\u0370-\u1EFF]+\.)*[0-9a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,61}[0-9a-z\u00C0-\u02FF\u0370-\u1EFF])?\.)?[a-z\u00C0-\u02FF\u0370-\u1EFF]([-0-9a-z\u00C0-\u02FF\u0370-\u1EFF]{0,17}[a-z\u00C0-\u02FF\u0370-\u1EFF])?|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[[0-9a-f:]{3,39}\])(:\d{1,5})?(\/\S*)?$/i.test(n)&&(a.value=n,!0)},regexp:function(e,t,n){e="string"==typeof t&&t.match(/^\/(.*)\/([imu]*)$/);try{return e&&new RegExp(e[1],e[2].replace("u","")).test(n)}catch(e){}},pattern:function(e,t,n){try{return"string"==typeof t?new RegExp("^(?:"+t+")$").test(n):null}catch(e){}},integer:function(e,t,n){return("number"!==e.type||!e.validity.badInput)&&/^-?[0-9]+$/.test(n)},float:function(e,t,n,a){return("number"!==e.type||!e.validity.badInput)&&(n=n.replace(" ","").replace(",","."),!!/^-?[0-9]*[.,]?[0-9]+$/.test(n)&&(a.value=n,!0))},min:function(e,t,n){if("number"===e.type){if(e.validity.rangeUnderflow)return!1;if(e.validity.badInput)return null}return null===t||parseFloat(n)>=t},max:function(e,t,n){if("number"===e.type){if(e.validity.rangeOverflow)return!1;if(e.validity.badInput)return null}return null===t||parseFloat(n)<=t},range:function(e,t,n){if("number"===e.type){if(e.validity.rangeUnderflow||e.validity.rangeOverflow)return!1;if(e.validity.badInput)return null}return d.isArray(t)?(null===t[0]||parseFloat(n)>=t[0])&&(null===t[1]||parseFloat(n)<=t[1]):null},submitted:function(e){return e.form["nette-submittedBy"]===e},fileSize:function(t,n,a){if(e.FileList)for(t=0;t<a.length;t++)if(a[t].size>n)return!1;return!0},image:function(t,n,a){if(e.FileList&&a instanceof e.FileList)for(t=0;t<a.length;t++)if((n=a[t].type)&&"image/gif"!==n&&"image/png"!==n&&"image/jpeg"!==n)return!1;return!0},static:function(e,t,n){return t}},d.toggleForm=function(e,t){var n;for(d.toggles={},n=0;n<e.elements.length;n++)e.elements[n].tagName.toLowerCase()in{input:1,select:1,textarea:1,button:1}&&d.toggleControl(e.elements[n],null,null,!t);for(n in d.toggles)d.toggle(n,d.toggles[n],t)},d.toggleControl=function(e,t,n,a,i){t=t||d.parseJSON(e.getAttribute("data-nette-rules")),i=void 0===i?{value:d.getEffectiveValue(e)}:i;for(var r,o=!1,l=[],s=function(){d.toggleForm(e.form,e)},u=0,c=t.length;u<c;u++){var f=t[u],p=f.op.match(/(~)?([^?]+)/);if(h=f.control?e.form.elements.namedItem(f.control):e){if(r=n,!1!==n){if(f.neg=p[1],f.op=p[2],r=e===h?i:{value:d.getEffectiveValue(h)},null===(r=d.validateRule(h,f.op,f.arg,r)))continue;f.neg&&(r=!r),f.rules||(n=r)}if(f.rules&&d.toggleControl(e,f.rules,r,a,i)||f.toggle){if(o=!0,a)for(var p=!document.addEventListener,g=h.tagName?h.name:h[0].name,h=h.tagName?h.form.elements:h,m=0;m<h.length;m++)h[m].name!==g||d.inArray(l,h[m])||(d.addEvent(h[m],p&&h[m].type in{checkbox:1,radio:1}?"click":"change",s),l.push(h[m]));for(var v in f.toggle||[])Object.prototype.hasOwnProperty.call(f.toggle,v)&&(d.toggles[v]=d.toggles[v]||(f.toggle[v]?r:!r))}}}return o},d.parseJSON=function(a){return"{op"===(a||"").substr(0,3)?eval("["+a+"]"):JSON.parse(a||"[]")},d.toggle=function(e,t,n){(e=document.getElementById(e))&&(e.style.display=t?"":"none")},d.initForm=function(t){d.toggleForm(t),t.noValidate||(t.noValidate=!0,d.addEvent(t,"submit",function(n){d.validateForm(t)||(n&&n.stopPropagation?(n.stopPropagation(),n.preventDefault()):e.event&&(event.cancelBubble=!0,event.returnValue=!1))}))},d.initOnLoad=function(){d.addEvent(document,"DOMContentLoaded",function(){for(var e=0;e<document.forms.length;e++)for(var t=document.forms[e],n=0;n<t.elements.length;n++)if(t.elements[n].getAttribute("data-nette-rules")){d.initForm(t);break}d.addEvent(document.body,"click",function(e){for(e=e.target||e.srcElement;e;){if(e.form&&e.type in{submit:1,image:1}){e.form["nette-submittedBy"]=e;break}e=e.parentNode}})})},d.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},d.inArray=function(e,t){if([].indexOf)return-1<e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},d.webalize=function(e){e=e.toLowerCase();var t,n,a="";for(t=0;t<e.length;t++)n=d.webalizeTable[e.charAt(t)],a+=n||e.charAt(t);return a.replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")},d.webalizeTable={"á":"a","ä":"a","č":"c","ď":"d","é":"e","ě":"e","í":"i","ľ":"l","ň":"n","ó":"o","ô":"o","ř":"r","š":"s","ť":"t","ú":"u","ů":"u","ý":"y","ž":"z"},d});var Happy,bind=function(e,t){return function(){return e.apply(t,arguments)}};Happy=function(){function e(){this.checkCheckboxState=bind(this.checkCheckboxState,this),this.checkCheckboxStateOnChange=bind(this.checkCheckboxStateOnChange,this),this.checkCheckboxStateOnClick=bind(this.checkCheckboxStateOnClick,this),this.radioOnChange=bind(this.radioOnChange,this),this.colors=["primary","success","info","warning","danger","white","gray"],this.templates={radio:'<div class="happy-radio"><b></b></div>',checkbox:'<div class="happy-checkbox"> <svg viewBox="0 0 30 30"> <rect class="mark-storke" x="15" y="3" rx="1" ry="1" width="10" height="4"/> <rect class="mark-storke" x="-7" y="21" rx="1" ry="1" width="19" height="4"/> </svg> </div>',text:"",textarea:""}}return e.prototype.colorify=function(e,t,n){if(e.classList.contains(n)&&t.classList.add(n),e.classList.contains(n+"-border"))return t.classList.add(n+"-border")},e.prototype.thicknessify=function(e,t){if(e.classList.contains("thin"))return t.classList.add("thin")},e.prototype.setNames=function(e,t){var n;if(t.setAttribute("data-name",e.getAttribute("name")),!1!==(n=e.getAttribute("value"))&&null!==n)return t.setAttribute("data-value",e.getAttribute("value"))},e.prototype.init=function(){return this.initRadio(),this.initCheckbox()},e.prototype.removeBySelector=function(e){var t,n,a,i,r;for(r=[],a=0,i=(n=document.querySelectorAll(e)).length;a<i;a++)t=n[a],r.push(t.parentNode.removeChild(t));return r},e.prototype.reset=function(){return this.removeBySelector(".happy-radio"),this.removeBySelector(".happy-checkbox"),this.init()},e.prototype.initRadio=function(){var e,t,n,a,i,r,o,l,s,d;for(d=[],n=0,o=(i=document.querySelectorAll("input[type=radio].happy")).length;n<o;n++){for((a=i[n]).insertAdjacentHTML("afterend",this.templates.radio),t=a.nextElementSibling,r=0,l=(s=this.colors).length;r<l;r++)e=s[r],this.colorify(a,t,e),this.setNames(a,t);this.thicknessify(a,t),this.checkRadioState(a),d.push(document.addEventListener("change",this.radioOnChange))}return d},e.prototype.radioOnChange=function(e){var t,n,a,i,r;if((r=e.target).classList.contains("happy")){for(i='.happy-radio[data-name="'+r.getAttribute("name")+'"]',n=0,a=(t=document.querySelectorAll(i)).length;n<a;n++)t[n].classList.remove("active");return this.checkRadioState(r)}},e.prototype.checkRadioState=function(e){var t,n,a,i;if(e.checked&&(n=e.getAttribute("name"),i=e.getAttribute("value"),a='.happy-radio[data-name="'+n+'"][data-value="'+i+'"]',t=document.querySelector(a)))return t.classList.add("active")},e.prototype.initCheckbox=function(){var e,t,n,a,i,r,o,l,s,d;for(d=[],n=0,o=(i=document.querySelectorAll("input[type=checkbox].happy")).length;n<o;n++){for((a=i[n]).insertAdjacentHTML("afterend",this.templates.checkbox),t=a.nextElementSibling,r=0,l=(s=this.colors).length;r<l;r++)e=s[r],this.colorify(a,t,e),this.setNames(a,t);this.thicknessify(a,t),this.checkCheckboxState(a),document.addEventListener("click",this.checkCheckboxStateOnClick),d.push(document.addEventListener("change",this.checkCheckboxStateOnChange))}return d},e.prototype.checkCheckboxStateOnClick=function(e){var t,n,a,i,r,o;if((n="svg"===e.target.tagName?e.target.parentNode:"rect"===e.target.tagName?e.target.parentNode.parentNode:e.target)&&n.classList.contains("happy-checkbox"))return e.preventDefault(),r='input[type=checkbox][name="'+n.getAttribute("data-name")+'"]',!1!==(o=n.getAttribute("data-value"))&&null!==o&&(r+='[value="'+o+'"]'),i=document.querySelector(r),i?(n.classList.contains("active")?(i.checked=!1,n.classList.remove("active")):(i.checked=!0,n.classList.add("active")),a=window.navigator.userAgent.indexOf("MSIE "),a?(t=document.createEvent("Event")).initEvent("change",!0,!0):t=new Event("change",{bubbles:!0}),i.dispatchEvent(t)):void 0},e.prototype.checkCheckboxStateOnChange=function(e){var t;if(e.target.classList.contains("happy"))return t=e.target,this.checkCheckboxState(t)},e.prototype.checkCheckboxState=function(e){var t,n,a;if(n='.happy-checkbox[data-name="'+e.getAttribute("name")+'"]',!1!==(a=e.getAttribute("value"))&&null!==a&&(n+='[data-value="'+a+'"]'),t=document.querySelector(n))return e.checked?t.classList.add("active"):t.classList.remove("active")},e}(),document.addEventListener("DOMContentLoaded",function(){return window.happy=new Happy,window.happy.init()}),function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=y({},t),e[V]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0}};for(var a in n)!(a in t)&&(t[a]=n[a]);oe(t);for(var i in this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Q,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),r(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),ie.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),k&&k.state!==t&&(s(k,"display",t?"none":""),t||k.state&&(e.options.group.revertClone?(S.insertBefore(k,E),e._animate(w,k)):S.insertBefore(k,w)),k.state=t)}function n(e,t,n){if(e){n=n||G;do{if(">*"===t&&e.parentNode===n||v(e,t))return e}while(e=a(e))}return null}function a(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function i(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function r(e,t,n){e.addEventListener(t,n,K)}function o(e,t,n){e.removeEventListener(t,n,K)}function l(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var a=(" "+e.className+" ").replace(H," ").replace(" "+t+" "," ");e.className=(a+(n?" "+t:"")).replace(H," ")}}function s(e,t,n){var a=e&&e.style;if(a){if(void 0===n)return G.defaultView&&G.defaultView.getComputedStyle?n=G.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in a||(t="-webkit-"+t),a[t]=n+("string"==typeof n?"":"px")}}function d(e,t,n){if(e){var a=e.getElementsByTagName(t),i=0,r=a.length;if(n)for(;i<r;i++)n(a[i],i);return a}return[]}function u(e,t,n,a,i,r,o){e=e||t[V];var l=G.createEvent("Event"),s=e.options,d="on"+n.charAt(0).toUpperCase()+n.substr(1);l.initEvent(n,!0,!0),l.to=t,l.from=i||t,l.item=a||t,l.clone=k,l.oldIndex=r,l.newIndex=o,t.dispatchEvent(l),s[d]&&s[d].call(e,l)}function c(e,t,n,a,i,r,o,l){var s,d,u=e[V],c=u.options.onMove;return(s=G.createEvent("Event")).initEvent("move",!0,!0),s.to=t,s.from=e,s.dragged=n,s.draggedRect=a,s.related=i||t,s.relatedRect=r||t.getBoundingClientRect(),s.willInsertAfter=l,e.dispatchEvent(s),c&&(d=c.call(u,s,o)),d}function f(e){e.draggable=!1}function p(){ee=!1}function g(e,t){var n=e.lastElementChild.getBoundingClientRect();return t.clientY-(n.top+n.height)>5||t.clientX-(n.left+n.width)>5}function h(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,a=0;n--;)a+=t.charCodeAt(n);return a.toString(36)}function m(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!v(e,t)||n++;return n}function v(e,t){if(e){var n=(t=t.split(".")).shift().toUpperCase(),a=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(a)||[]).length!=t.length)}return!1}function b(e,t){var n,a;return function(){void 0===n&&(n=arguments,a=this,setTimeout(function(){1===n.length?e.call(a,n[0]):e.apply(a,n),n=void 0},t))}}function y(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function x(e){return W?W(e).clone(!0)[0]:J&&J.dom?J.dom(e).cloneNode(!0):e.cloneNode(!0)}function $(e){for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var a=t[n];a.checked&&ae.push(a)}}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var w,_,C,k,S,E,F,D,T,I,L,A,M,O,R,P,B,N,z,j,U={},H=/\s+/g,q=/left|right|inline/,V="Sortable"+(new Date).getTime(),Y=window,G=Y.document,X=Y.parseInt,W=Y.jQuery||Y.Zepto,J=Y.Polymer,K=!1,Q=!!("draggable"in G.createElement("div")),Z=function(e){return!navigator.userAgent.match(/Trident.*rv[ :]?11\./)&&(e=G.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),ee=!1,te=Math.abs,ne=Math.min,ae=[],ie=[],re=b(function(e,t,n){if(n&&t.scroll){var a,i,r,o,l,s,d=n[V],u=t.scrollSensitivity,c=t.scrollSpeed,f=e.clientX,p=e.clientY,g=window.innerWidth,h=window.innerHeight;if(T!==n&&(D=t.scroll,T=n,I=t.scrollFn,!0===D)){D=n;do{if(D.offsetWidth<D.scrollWidth||D.offsetHeight<D.scrollHeight)break}while(D=D.parentNode)}D&&(a=D,i=D.getBoundingClientRect(),r=(te(i.right-f)<=u)-(te(i.left-f)<=u),o=(te(i.bottom-p)<=u)-(te(i.top-p)<=u)),r||o||(r=(g-f<=u)-(f<=u),o=(h-p<=u)-(p<=u),(r||o)&&(a=Y)),U.vx===r&&U.vy===o&&U.el===a||(U.el=a,U.vx=r,U.vy=o,clearInterval(U.pid),a&&(U.pid=setInterval(function(){return s=o?o*c:0,l=r?r*c:0,"function"==typeof I?I.call(d,l,s,e):void(a===Y?Y.scrollTo(Y.pageXOffset+l,Y.pageYOffset+s):(a.scrollTop+=s,a.scrollLeft+=l))},24)))}},30),oe=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=n.name),"function"==typeof e?e:function(n,a){var i=a.options.group.name;return t?e:e&&(e.join?e.indexOf(i)>-1:i==e)}}var n={},a=e.group;a&&"object"==typeof a||(a={name:a}),n.name=a.name,n.checkPull=t(a.pull,!0),n.checkPut=t(a.put),n.revertClone=a.revertClone,e.group=n};e.prototype={constructor:e,_onTapStart:function(e){var t,a=this,i=this.el,r=this.options,o=r.preventOnFilter,l=e.type,s=e.touches&&e.touches[0],d=(s||e).target,c=e.target.shadowRoot&&e.path&&e.path[0]||d,f=r.filter;if($(i),!w&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||r.disabled)&&(d=n(d,r.draggable,i))&&F!==d){if(t=m(d,r.draggable),"function"==typeof f){if(f.call(this,e,d,this))return u(a,c,"filter",d,i,t),void(o&&e.preventDefault())}else if(f&&(f=f.split(",").some(function(e){if(e=n(c,e.trim(),i))return u(a,e,"filter",d,i,t),!0})))return void(o&&e.preventDefault());r.handle&&!n(c,r.handle,i)||this._prepareDragStart(e,s,d,t)}},_prepareDragStart:function(e,t,n,a){var i,o=this,s=o.el,c=o.options,p=s.ownerDocument;n&&!w&&n.parentNode===s&&(N=e,S=s,w=n,_=w.parentNode,E=w.nextSibling,F=n,P=c.group,O=a,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,w.style["will-change"]="transform",i=function(){o._disableDelayedDrag(),w.draggable=o.nativeDraggable,l(w,c.chosenClass,!0),o._triggerDragStart(e,t),u(o,S,"choose",w,S,O)},c.ignore.split(",").forEach(function(e){d(w,e.trim(),f)}),r(p,"mouseup",o._onDrop),r(p,"touchend",o._onDrop),r(p,"touchcancel",o._onDrop),r(p,"pointercancel",o._onDrop),r(p,"selectstart",o),c.delay?(r(p,"mouseup",o._disableDelayedDrag),r(p,"touchend",o._disableDelayedDrag),r(p,"touchcancel",o._disableDelayedDrag),r(p,"mousemove",o._disableDelayedDrag),r(p,"touchmove",o._disableDelayedDrag),r(p,"pointermove",o._disableDelayedDrag),o._dragStartTimer=setTimeout(i,c.delay)):i())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),o(e,"mouseup",this._disableDelayedDrag),o(e,"touchend",this._disableDelayedDrag),o(e,"touchcancel",this._disableDelayedDrag),o(e,"mousemove",this._disableDelayedDrag),o(e,"touchmove",this._disableDelayedDrag),o(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){(t=t||("touch"==e.pointerType?e:null))?(N={target:w,clientX:t.clientX,clientY:t.clientY},this._onDragStart(N,"touch")):this.nativeDraggable?(r(w,"dragend",this),r(S,"dragstart",this._onDragStart)):this._onDragStart(N,!0);try{G.selection?setTimeout(function(){G.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(S&&w){var t=this.options;l(w,t.ghostClass,!0),l(w,t.dragClass,!1),e.active=this,u(this,S,"start",w,S,O)}else this._nulling()},_emulateDragOver:function(){if(z){if(this._lastX===z.clientX&&this._lastY===z.clientY)return;this._lastX=z.clientX,this._lastY=z.clientY,Z||s(C,"display","none");var e=G.elementFromPoint(z.clientX,z.clientY),t=e,n=ie.length;if(t)do{if(t[V]){for(;n--;)ie[n]({clientX:z.clientX,clientY:z.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);Z||s(C,"display","")}},_onTouchMove:function(t){if(N){var n=this.options,a=n.fallbackTolerance,i=n.fallbackOffset,r=t.touches?t.touches[0]:t,o=r.clientX-N.clientX+i.x,l=r.clientY-N.clientY+i.y,d=t.touches?"translate3d("+o+"px,"+l+"px,0)":"translate("+o+"px,"+l+"px)";if(!e.active){if(a&&ne(te(r.clientX-this._lastX),te(r.clientY-this._lastY))<a)return;this._dragStarted()}this._appendGhost(),j=!0,z=r,s(C,"webkitTransform",d),s(C,"mozTransform",d),s(C,"msTransform",d),s(C,"transform",d),t.preventDefault()}},_appendGhost:function(){if(!C){var e,t=w.getBoundingClientRect(),n=s(w),a=this.options;l(C=w.cloneNode(!0),a.ghostClass,!1),l(C,a.fallbackClass,!0),l(C,a.dragClass,!0),s(C,"top",t.top-X(n.marginTop,10)),s(C,"left",t.left-X(n.marginLeft,10)),s(C,"width",t.width),s(C,"height",t.height),s(C,"opacity","0.8"),s(C,"position","fixed"),s(C,"zIndex","100000"),s(C,"pointerEvents","none"),a.fallbackOnBody&&G.body.appendChild(C)||S.appendChild(C),e=C.getBoundingClientRect(),s(C,"width",2*t.width-e.width),s(C,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,a=this.options;this._offUpEvents(),P.checkPull(this,this,w,e)&&(k=x(w),k.draggable=!1,k.style["will-change"]="",s(k,"display","none"),l(k,this.options.chosenClass,!1),S.insertBefore(k,w),u(this,S,"clone",w)),l(w,a.dragClass,!0),t?("touch"===t?(r(G,"touchmove",this._onTouchMove),r(G,"touchend",this._onDrop),r(G,"touchcancel",this._onDrop),r(G,"pointermove",this._onTouchMove),r(G,"pointerup",this._onDrop)):(r(G,"mousemove",this._onTouchMove),r(G,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",a.setData&&a.setData.call(this,n,w)),r(G,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(a){var i,r,o,l,d=this.el,u=this.options,f=u.group,h=e.active,m=P===f,v=!1,b=u.sort;if(void 0!==a.preventDefault&&(a.preventDefault(),!u.dragoverBubble&&a.stopPropagation()),!w.animated&&(j=!0,h&&!u.disabled&&(m?b||(l=!S.contains(w)):B===this||(h.lastPullMode=P.checkPull(this,h,w,a))&&f.checkPut(this,h,w,a))&&(void 0===a.rootEl||a.rootEl===this.el))){if(re(a,u,this.el),ee)return;if(i=n(a.target,u.draggable,d),r=w.getBoundingClientRect(),B!==this&&(B=this,v=!0),l)return t(h,!0),_=S,void(k||E?S.insertBefore(w,k||E):b||S.appendChild(w));if(0===d.children.length||d.children[0]===C||d===a.target&&g(d,a)){if(0!==d.children.length&&d.children[0]!==C&&d===a.target&&(i=d.lastElementChild),i){if(i.animated)return;o=i.getBoundingClientRect()}t(h,m),!1!==c(S,d,w,r,i,o,a)&&(w.contains(d)||(d.appendChild(w),_=d),this._animate(r,w),i&&this._animate(o,i))}else if(i&&!i.animated&&i!==w&&void 0!==i.parentNode[V]){L!==i&&(L=i,A=s(i),M=s(i.parentNode));var y=(o=i.getBoundingClientRect()).right-o.left,x=o.bottom-o.top,$=q.test(A.cssFloat+A.display)||"flex"==M.display&&0===M["flex-direction"].indexOf("row"),F=i.offsetWidth>w.offsetWidth,D=i.offsetHeight>w.offsetHeight,T=($?(a.clientX-o.left)/y:(a.clientY-o.top)/x)>.5,I=i.nextElementSibling,O=!1;if($){var R=w.offsetTop,N=i.offsetTop;O=R===N?i.previousElementSibling===w&&!F||T&&F:i.previousElementSibling===w||w.previousElementSibling===i?(a.clientY-o.top)/x>.5:N>R}else v||(O=I!==w&&!D||T&&D);var z=c(S,d,w,r,i,o,a,O);!1!==z&&(1!==z&&-1!==z||(O=1===z),ee=!0,setTimeout(p,30),t(h,m),w.contains(d)||(O&&!I?d.appendChild(w):i.parentNode.insertBefore(w,O?I:i)),_=w.parentNode,this._animate(r,w),this._animate(o,i))}}},_animate:function(e,t){var n=this.options.animation;if(n){var a=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),s(t,"transition","none"),s(t,"transform","translate3d("+(e.left-a.left)+"px,"+(e.top-a.top)+"px,0)"),t.offsetWidth,s(t,"transition","all "+n+"ms"),s(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){s(t,"transition",""),s(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;o(G,"touchmove",this._onTouchMove),o(G,"pointermove",this._onTouchMove),o(e,"mouseup",this._onDrop),o(e,"touchend",this._onDrop),o(e,"pointerup",this._onDrop),o(e,"touchcancel",this._onDrop),o(e,"pointercancel",this._onDrop),o(e,"selectstart",this)},_onDrop:function(t){var n=this.el,a=this.options;clearInterval(this._loopId),clearInterval(U.pid),clearTimeout(this._dragStartTimer),o(G,"mousemove",this._onTouchMove),this.nativeDraggable&&(o(G,"drop",this),o(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(j&&(t.preventDefault(),!a.dropBubble&&t.stopPropagation()),C&&C.parentNode&&C.parentNode.removeChild(C),S!==_&&"clone"===e.active.lastPullMode||k&&k.parentNode&&k.parentNode.removeChild(k),w&&(this.nativeDraggable&&o(w,"dragend",this),f(w),w.style["will-change"]="",l(w,this.options.ghostClass,!1),l(w,this.options.chosenClass,!1),u(this,S,"unchoose",w,S,O),S!==_?(R=m(w,a.draggable))>=0&&(u(null,_,"add",w,S,O,R),u(this,S,"remove",w,S,O,R),u(null,_,"sort",w,S,O,R),u(this,S,"sort",w,S,O,R)):w.nextSibling!==E&&(R=m(w,a.draggable))>=0&&(u(this,S,"update",w,S,O,R),u(this,S,"sort",w,S,O,R)),e.active&&(null!=R&&-1!==R||(R=O),u(this,S,"end",w,S,O,R),this.save()))),this._nulling()},_nulling:function(){S=w=_=C=E=k=F=D=T=N=z=j=R=L=A=B=P=e.active=null,ae.forEach(function(e){e.checked=!0}),ae.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":w&&(this._onDragOver(e),i(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],a=this.el.children,i=0,r=a.length,o=this.options;i<r;i++)e=a[i],n(e,o.draggable,this.el)&&t.push(e.getAttribute(o.dataIdAttr)||h(e));return t},sort:function(e){var t={},a=this.el;this.toArray().forEach(function(e,i){var r=a.children[i];n(r,this.options.draggable,a)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(a.removeChild(t[e]),a.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&oe(n)))},destroy:function(){var e=this.el;e[V]=null,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),o(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),ie.splice(ie.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},r(G,"touchmove",function(t){e.active&&t.preventDefault()});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){K={capture:!1,passive:!1}}}))}catch(e){}return e.utils={on:r,off:o,css:s,find:d,is:function(e,t){return!!n(e,t,e)},extend:y,throttle:b,closest:n,toggleClass:l,clone:x,index:m},e.create=function(t,n){return new e(t,n)},e.version="1.6.1",e});var datagridFitlerMultiSelect,datagridGroupActionMultiSelect,datagridShiftGroupSelection,datagridSortable,datagridSortableTree,getEventDomPath,indexOf=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};$(document).on("click","[data-datagrid-confirm]:not(.ajax)",function(e){if(!confirm($(e.target).closest("a").attr("data-datagrid-confirm")))return e.stopPropagation(),e.preventDefault()}),$.nette.ext("datagrid.confirm",{before:function(e,t){var n;if(t.nette&&(n=t.nette.el.data("datagrid-confirm")))return confirm(n)}}),$(document).on("change","select[data-autosubmit-per-page]",function(){var e;return 0===(e=$(this).parent().find("input[type=submit]")).length&&(e=$(this).parent().find("button[type=submit]")),e.click()}).on("change","select[data-autosubmit]",function(){return $(this).closest("form").first().submit()}).on("change","input[data-autosubmit][data-autosubmit-change]",function(e){var t;return e.which||e.keyCode||0,clearTimeout(window.datagrid_autosubmit_timer),t=$(this),window.datagrid_autosubmit_timer=setTimeout(function(e){return function(){return t.closest("form").first().submit()}}(),200)}).on("keyup","input[data-autosubmit]",function(e){var t,n;if(13===(n=e.which||e.keyCode||0)||!(n>=9&&n<=40||n>=112&&n<=123))return clearTimeout(window.datagrid_autosubmit_timer),t=$(this),window.datagrid_autosubmit_timer=setTimeout(function(e){return function(){return t.closest("form").first().submit()}}(),200)}).on("keydown",".datagrid-inline-edit input",function(e){if(13===(e.which||e.keyCode||0))return e.stopPropagation(),e.preventDefault(),$(this).closest("tr").find('.col-action-inline-edit [name="inline_edit[submit]"]').click()}),$(document).on("keydown","input[data-datagrid-manualsubmit]",function(e){if(13===(e.which||e.keyCode||0))return e.stopPropagation(),e.preventDefault(),$(this).closest("form").first().submit()}),getEventDomPath=function(e){var t,n;if(indexOf.call(e,n)>=0)return e.path;for(n=[],t=e.target;t!==document.body;)n.push(t),t=t.parentNode;return n},(datagridShiftGroupSelection=function(){var e;return e=null,document.addEventListener("click",function(t){var n,a,i,r,o,l,s,d,u,c,f,p,g,h,m,v,b,y,x;for(o=0,p=(m=getEventDomPath(t)).length;o<p;o++)if(i=m[o],$(i).is(".col-checkbox")&&e&&t.shiftKey){if(a=$(i).closest("tr"),c=e.closest("tr"),f=c.closest("tbody"),n=f.find("tr").toArray(),a.index()>c.index()?x=n.slice(c.index(),a.index()):a.index()<c.index()&&(x=n.slice(a.index()+1,c.index())),!x)return;for(d=0,g=x.length;d<g;d++)y=x[d],(s=$(y).find(".col-checkbox input[type=checkbox]")[0])&&(s.checked=!0,l=window.navigator.userAgent.indexOf("MSIE "),l?(r=document.createEvent("Event")).initEvent("change",!0,!0):r=new Event("change",{bubbles:!0}),s.dispatchEvent(r))}for(b=[],u=0,h=(v=getEventDomPath(t)).length;u<h;u++)i=v[u],$(i).is(".col-checkbox")?b.push(e=$(i)):b.push(void 0);return b})})(),document.addEventListener("change",function(e){var t,n,a,i,r,o,l,s,d,u,c,f;if((i=e.target.getAttribute("data-check"))&&(t=document.querySelectorAll("input[data-check-all-"+i+"]:checked"),(c=document.querySelector(".datagrid-"+i+' select[name="group_action[group_action]"]'))&&(n=document.querySelector(".datagrid-"+i+" .datagrid-selected-rows-count"),t.length?(c.disabled=!1,f=document.querySelectorAll("input[data-check-all-"+i+"]").length,n&&(n.innerHTML=t.length+"/"+f)):(c.disabled=!0,c.value="",n&&(n.innerHTML=""))),o=window.navigator.userAgent.indexOf("MSIE "),o?(a=document.createEvent("Event")).initEvent("change",!0,!0):a=new Event("change",{bubbles:!0}),c&&c.dispatchEvent(a)),i=e.target.getAttribute("data-check-all")){for(u=[],r=0,d=(s=document.querySelectorAll("input[type=checkbox][data-check-all-"+i+"]")).length;r<d;r++)l=s[r],l.checked=e.target.checked,o=window.navigator.userAgent.indexOf("MSIE "),o?(a=document.createEvent("Event")).initEvent("change",!0,!0):a=new Event("change",{bubbles:!0}),u.push(l.dispatchEvent(a));return u}}),window.datagridSerializeUrl=function(e,t){var n=[];for(var a in e)if(e.hasOwnProperty(a)){var i=t?t+"["+a+"]":a,r=e[a];if(null!==r&&""!==r)if("object"==typeof r){var o=window.datagridSerializeUrl(r,i);o&&n.push(o)}else n.push(encodeURIComponent(i)+"="+encodeURIComponent(r))}return n.join("&")},datagridSortable=function(){if(void 0!==$.fn.sortable)return $(".datagrid [data-sortable]").sortable({handle:".handle-sort",items:"tr",axis:"y",update:function(e,t){var n,a,i,r,o,l,s;return l=t.item.closest("tr[data-id]"),i=l.data("id"),o=null,r=null,l.prev().length&&(o=l.prev().data("id")),l.next().length&&(r=l.next().data("id")),s=$(this).data("sortable-url"),a={},n=l.closest(".datagrid").find("tbody").attr("data-sortable-parent-path"),a[(n+"-item_id").replace(/^-/,"")]=i,a[(n+"-prev_id").replace(/^-/,"")]=o,a[(n+"-next_id").replace(/^-/,"")]=r,$.nette.ajax({type:"GET",url:s,data:a,error:function(e,t,n){return alert(e.statusText)}})},helper:function(e,t){return t.children().each(function(){return $(this).width($(this).width())}),t}})},$(function(){return datagridSortable()}),void 0===datagridSortableTree&&(datagridSortableTree=function(){if(void 0!==$(".datagrid-tree-item-children").sortable)return $(".datagrid-tree-item-children").sortable({handle:".handle-sort",items:".datagrid-tree-item:not(.datagrid-tree-header)",toleranceElement:"> .datagrid-tree-item-content",connectWith:".datagrid-tree-item-children",update:function(e,t){var n,a,i,r,o,l,s,d,u;if($(".toggle-tree-to-delete").remove(),d=t.item.closest(".datagrid-tree-item[data-id]"),i=d.data("id"),s=null,r=null,l=null,d.prev().length&&(s=d.prev().data("id")),d.next().length&&(r=d.next().data("id")),(o=d.parent().closest(".datagrid-tree-item")).length&&(o.find(".datagrid-tree-item-children").first().css({display:"block"}),o.addClass("has-children"),l=o.data("id")),u=$(this).data("sortable-url"))return o.find("[data-toggle-tree]").first().removeClass("hidden"),n=d.closest(".datagrid-tree").attr("data-sortable-parent-path"),a={},a[(n+"-item_id").replace(/^-/,"")]=i,a[(n+"-prev_id").replace(/^-/,"")]=s,a[(n+"-next_id").replace(/^-/,"")]=r,a[(n+"-parent_id").replace(/^-/,"")]=l,$.nette.ajax({type:"GET",url:u,data:a,error:function(e,t,n){if("abort"!==n)return alert(e.statusText)}})},stop:function(e,t){return $(".toggle-tree-to-delete").removeClass("toggle-tree-to-delete")},start:function(e,t){var n;if((n=t.item.parent().closest(".datagrid-tree-item")).length&&2===n.find(".datagrid-tree-item").length)return n.find("[data-toggle-tree]").addClass("toggle-tree-to-delete")}})}),$(function(){return datagridSortableTree()}),$.nette.ext("datagrid.happy",{success:function(){var e,t,n,a,i,r,o,l,s,d,u,c,f;for(window.happy&&window.happy.reset(),f=[],o=0,u=(r=$(".datagrid")).length;o<u;o++){for(n="",d=0,c=(a=r[o].classList).length;d<c;d++)e=a[d],n=n+"."+e;1===(t=document.querySelectorAll(n+" input[data-check]:checked")).length&&"toggle-all"===t[0].getAttribute("name")?(s=document.querySelector(n+" input[name=toggle-all]"),s?(s.checked=!1,l=window.navigator.userAgent.indexOf("MSIE "),l?(i=document.createEvent("Event")).initEvent("change",!0,!0):i=new Event("change",{bubbles:!0}),f.push(s.dispatchEvent(i))):f.push(void 0)):f.push(void 0)}return f}}),$.nette.ext("datagrid.sortable",{success:function(){return datagridSortable()}}),$.nette.ext("datagrid.forms",{success:function(){return $(".datagrid").find("form").each(function(){return window.Nette.initForm(this)})}}),$.nette.ext("datagrid.url",{success:function(e){var t,n,a,i;if(e._datagrid_url&&window.history.pushState&&(t=window.location.protocol+"//"+window.location.host,n=window.location.pathname,a=window.datagridSerializeUrl(e.state).replace(/&+$/gm,""),i=a?t+n+"?"+a.replace(/\&*$/,""):t+n,i+=window.location.hash,window.location.href!==i))return window.history.pushState({path:i},"",i)}}),$.nette.ext("datagrid.sort",{success:function(e){var t,n,a,i;if(e._datagrid_sort){a=e._datagrid_sort,i=[];for(n in a)t=a[n],i.push($("#datagrid-sort-"+n).attr("href",t));return i}}}),$.nette.ext("datargid.item_detail",{before:function(e,t){var n,a;if(t.nette&&t.nette.el.attr("data-toggle-detail"))return n=t.nette.el.attr("data-toggle-detail"),a=$(".item-detail-"+n),a.hasClass("loaded")?a.find(".item-detail-content").length?(a.hasClass("toggled")?a.find(".item-detail-content").slideToggle("fast",function(e){return function(){return a.toggleClass("toggled")}}()):(a.toggleClass("toggled"),a.find(".item-detail-content").slideToggle("fast")),!1):(a.removeClass("toggled"),!0):a.addClass("loaded")},success:function(e){var t,n;if(e._datagrid_toggle_detail)return t=e._datagrid_toggle_detail,(n=$(".item-detail-"+t)).toggleClass("toggled"),n.find(".item-detail-content").slideToggle("fast")}}),$.nette.ext("datagrid.tree",{before:function(e,t){var n;return!(t.nette&&t.nette.el.attr("data-toggle-tree")&&(t.nette.el.toggleClass("toggle-rotate"),(n=t.nette.el.closest(".datagrid-tree-item").find(".datagrid-tree-item-children").first()).hasClass("loaded"))&&(n.slideToggle("fast"),1))},success:function(e){var t,n,a,i,r,o,l;if(e._datagrid_tree){a=e._datagrid_tree,(t=$('.datagrid-tree-item[data-id="'+a+'"]').find(".datagrid-tree-item-children").first()).addClass("loaded"),r=e.snippets;for(i in r)o=r[i],n=$(o),(l=$('<div class="datagrid-tree-item" id="'+i+'">')).attr("data-id",n.attr("data-id")),l.append(n),n.data("has-children")&&l.addClass("has-children"),t.append(l);t.addClass("loaded"),t.slideToggle("fast"),$.nette.load()}return datagridSortableTree()}}),$(document).on("click","[data-datagrid-editable-url]",function(e){var t,n,a,i,r,o,l,s,d,u,c,f;if(i=$(this),"a"!==e.target.tagName.toLowerCase()&&!i.hasClass("datagrid-inline-edit")&&!i.hasClass("editing")){i.addClass("editing"),r=i.html().trim().replace("<br>","\n"),f=i.data("datagrid-editable-value")?i.data("datagrid-editable-value"):r,i.data("originalValue",r),i.data("valueToEdit",f),"textarea"===i.data("datagrid-editable-type")?(d=$("<textarea>"+f+"</textarea>"),s=parseInt(i.css("padding").replace(/[^-\d\.]/g,""),10),o=i.outerHeight(),u=Math.round(parseFloat(i.css("line-height"))),l=(o-2*s)/u,d.attr("rows",Math.round(l))):"select"===i.data("datagrid-editable-type")?(d=$(i.data("datagrid-editable-element"))).find("option").each(function(){if($(this).text()===f)return d.find("option[value="+f+"]").prop("selected",!0)}):(d=$('<input type="'+i.data("datagrid-editable-type")+'">')).val(f),a=i.data("datagrid-editable-attrs");for(t in a)n=a[t],d.attr(t,n);return i.removeClass("edited"),i.html(d),c=function(e,t){var n;return n=t.val(),n!==e.data("valueToEdit")?$.nette.ajax({url:e.data("datagrid-editable-url"),data:{value:n},method:"POST",success:function(t){return"select"===e.data("datagrid-editable-type")?e.html(d.find("option[value="+n+"]").html()):(t._datagrid_editable_new_value&&(n=t._datagrid_editable_new_value),e.html(n)),e.addClass("edited")},error:function(){return e.html(e.data("originalValue")),e.addClass("edited-error")}}):e.html(e.data("originalValue")),setTimeout(function(){return e.removeClass("editing")},1200)},i.find("input,textarea,select").focus().on("blur",function(){return c(i,$(this))}).on("keydown",function(e){return"textarea"!==i.data("datagrid-editable-type")&&13===e.which?(e.stopPropagation(),e.preventDefault(),c(i,$(this))):27===e.which?(e.stopPropagation(),e.preventDefault(),i.removeClass("editing"),i.html(i.data("originalValue"))):void 0}),i.find("select").on("change",function(){return c(i,$(this))})}}),$.nette.ext("datagrid.after_inline_edit",{success:function(e){var t;return t=$(".datagrid-"+e._datagrid_name),e._datagrid_inline_edited?(t.find("tr[data-id="+e._datagrid_inline_edited+"] > td").addClass("edited"),t.find(".datagrid-inline-edit-trigger").removeClass("hidden")):e._datagrid_inline_edit_cancel?t.find(".datagrid-inline-edit-trigger").removeClass("hidden"):void 0}}),$(document).on("click","[data-datagrid-toggle-inline-add]",function(e){var t;return e.stopPropagation(),e.preventDefault(),(t=$(this).closest(".datagrid").find(".datagrid-row-inline-add")).hasClass("datagrid-row-inline-add-hidden")&&t.removeClass("datagrid-row-inline-add-hidden"),t.find("input:not([readonly]),textarea:not([readonly])").first().focus()}),$(document).on("mouseup","[data-datagrid-cancel-inline-add]",function(e){if(1===(e.which||e.keyCode||0))return e.stopPropagation(),e.preventDefault(),$(".datagrid-row-inline-add").addClass("datagrid-row-inline-add-hidden")}),$.nette.ext("datagrid-toggle-inline-add",{success:function(e){if(e._datagrid_inline_added)return $(".datagrid-row-inline-add").find("textarea").html(""),$(".datagrid-row-inline-add").find("input[type!=submit]").val(""),$(".datagrid-row-inline-add").addClass("datagrid-row-inline-add-hidden")}}),datagridFitlerMultiSelect=function(){var e;if(e=$(".selectpicker").first(),$.fn.selectpicker)return $.fn.selectpicker.defaults={countSelectedText:e.data("i18n-selected"),iconBase:"",tickIcon:e.data("selected-icon-check")}},$(function(){return datagridFitlerMultiSelect()}),datagridGroupActionMultiSelect=function(){return $("[data-datagrid-multiselect-id]").each(function(){var e;if($(this).hasClass("selectpicker"))return $(this).removeAttr("id"),e=$(this).data("datagrid-multiselect-id"),$(this).on("loaded.bs.select",function(e){return $(this).parent().attr("style","display:none;"),$(this).parent().find(".hidden").removeClass("hidden").addClass("btn-default")}),$(this).on("rendered.bs.select",function(t){return $(this).parent().attr("id",e)})})},$(function(){return datagridGroupActionMultiSelect()}),$.nette.ext("datagrid.fitlerMultiSelect",{success:function(){if(datagridFitlerMultiSelect(),$.fn.selectpicker)return $(".selectpicker").selectpicker({iconBase:"fa"})}}),$.nette.ext("datagrid.groupActionMultiSelect",{success:function(){if($.fn.selectpicker)return datagridGroupActionMultiSelect()}}),$.nette.ext("datagrid.inline-editing",{success:function(e){if(e._datagrid_inline_editing)return $(".datagrid-inline-edit-trigger").addClass("hidden")}}),$.nette.ext("datagrid.redraw-item",{success:function(e){if(e._datagrid_redraw_item_class)return $("tr[data-id="+e._datagrid_redraw_item_id+"]").attr("class",e._datagrid_redraw_item_class)}}),$.nette.ext("datagrid.reset-filter-by-column",{success:function(e){var t,n,a,i,r,o;if(e._datagrid_name&&((t=$(".datagrid-"+e._datagrid_name)).find("[data-datagrid-reset-filter-by-column]").addClass("hidden"),e.non_empty_filters&&e.non_empty_filters.length)){for(a=0,r=(o=e.non_empty_filters).length;a<r;a++)i=o[a],t.find("[data-datagrid-reset-filter-by-column="+i+"]").removeClass("hidden");return n=t.find(".reset-filter").attr("href"),t.find("[data-datagrid-reset-filter-by-column]").each(function(){var t;return i=$(this).attr("data-datagrid-reset-filter-by-column"),t=n.replace("do="+e._datagrid_name+"-resetFilter","do="+e._datagrid_name+"-resetColumnFilter"),t+="&"+e._datagrid_name+"-key="+i,$(this).attr("href",t)})}}}),$(function(){if($(".datagrid").length)return $.nette.ajax({type:"GET",url:$(".datagrid").first().data("refresh-state")})}),$.nette.ext("ublaboo-spinners",{before:function(e,t){var n,a,i;if(t.nette){if(n=t.nette.el,i=$('<div class="ublaboo-spinner ublaboo-spinner-small"><i></i><i></i><i></i><i></i></div>'),n.is('.datagrid [name="group_action[submit]"]'))return n.after(i);if(n.is(".datagrid a")&&n.data("toggle-detail")){if(a=t.nette.el.attr("data-toggle-detail"),!$(".item-detail-"+a).hasClass("loaded"))return n.addClass("ublaboo-spinner-icon")}else{if(n.is(".datagrid .col-pagination a"))return n.closest(".row-grid-bottom").find(".col-per-page").prepend(i);if(n.is(".datagrid .datagrid-per-page-submit"))return n.closest(".row-grid-bottom").find(".col-per-page").prepend(i);if(n.is(".datagrid .reset-filter"))return n.closest(".row-grid-bottom").find(".col-per-page").prepend(i)}}},complete:function(){return $(".ublaboo-spinner").remove(),$(".ublaboo-spinner-icon").removeClass("ublaboo-spinner-icon")}}),$(window).on("load",function(){$("#loader-wrapper").fadeOut("slow")}),$(document).ready(function(){$.nette.init(),$(window).resize(function(){$(window).width()>768&&$("body").removeClass("toggled-special")}),$(window).width()<768&&$("#menu-toggle").on("click",function(){$("body").toggleClass("toggled-special")}),$(window).width()<=768&&$("#wrapper").removeClass("toggled"),$(document).on("click","#menu-toggle",function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled")}),$('[data-toggle="tooltip"]').tooltip(),$(".trumbowyg").trumbowyg({resetCss:!0,removeformatPasted:!0,autogrow:!0,btnsDef:{image:{dropdown:["insertImage","upload","base64","noEmbed"],ico:"insertImage"}}}).on("tbwinit",function(){$("._trumbowyg.sass-editor").addClass("advanced")}),$(".imageUpload").fileuploader({changeInput:'<div class="fileuploader-input"><div class="fileuploader-input-inner"><img src="../../../admin-module/plugins/fileuploader/src/fileuploader-dragdrop-icon.png"><h3 class="fileuploader-input-caption">Drag and drop images here</h3><p>or</p><div class="fileuploader-input-button">Browse Files</div></div></div>',theme:"dragdrop",afterRender:function(){$(".fileuploader-items-list").append($("li.formImage"))}}),$(".contactUpload").fileuploader({afterRender:function(){$(".fileuploader-items-list").append($("li.formImage"))}}),$("label.remove").click(function(){$(this).closest("li").slideUp("normal",function(){$(this).remove()})}),$.nette.ext("modal",{success:function(e,t,n,a){if(a.nette.el.attr("data-toggle")){var i=$("#editModal").modal("show");i.find(".modal-body").html(e),i.find(".modal-title").html(a.nette.el.attr("data-heading")),i.find(".modal-body form").css("margin-top","0")}}}),$('.fileuploader-items input[type="radio"]').each(function(){$(this).is(":checked")?$(this).closest("div").hide():$(this).closest("div").show()}),$("label.main-image").on("click",function(e){if(!0!==confirm("Are you sure you want to change this image to main?"))return e.preventDefault(),!1;$('.fileuploader-items [type="radio"]').each(function(){$(this).is(":checked")?$(this).closest("div").fadeOut("fast"):$(this).closest("div").fadeIn("fast")})}),$("#frm-modalContactForm").length&&($("#frm-modalContactForm").appendTo(".modal-body").removeClass("hidden").css("margin","0"),$(".modal-title").append("Add new")),$("form#frm-contactForm-contactForm .title i, form#frm-contactForm-contactForm h1").click(function(){var e=$("form#frm-contactForm-contactForm .title i"),t=$(e).siblings("input").val();$(e).toggleClass("fa-pencil fa-check").siblings(".title input, .title h1").toggleClass("hidden"),$(e).siblings("h1").html(t)}),$(".contact-action a.remove").click(function(){$(this).closest(".form-group").slideUp(200,function(){$(this).remove()})});var e=document.getElementById("snippet-contactForm-contact");Sortable.create(e,{animation:100,handle:".reorder",onEnd:function(){$.nette.ajax({url:"?do=reorder",type:"GET",data:{data:function(){var e=[];return $(".form-group").each(function(){$(this).data("sort",$(this).index()+1),e.push({sort:$(this).data("sort"),id:$(this).attr("id")})}),e}()}})}})});